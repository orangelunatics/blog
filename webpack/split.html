<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>webpack åˆ†åŒ… | Nav1ğŸª</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text y=%22.9em%22 font-size=%2290%22&gt;ğŸ„&lt;/text&gt;&lt;/svg&gt;">
    <meta name="description" content="naviçš„ä¸ªäººblog">
    <meta name="author" content="navi">
    <meta name="keywords" content="navi">
    
    <link rel="preload" href="/blog/assets/css/0.styles.73b6f229.css" as="style"><link rel="preload" href="/blog/assets/js/app.99c8d667.js" as="script"><link rel="preload" href="/blog/assets/js/2.503560b4.js" as="script"><link rel="preload" href="/blog/assets/js/37.d520b5d0.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.ff493e67.js"><link rel="prefetch" href="/blog/assets/js/11.8af03509.js"><link rel="prefetch" href="/blog/assets/js/12.ab40ab5c.js"><link rel="prefetch" href="/blog/assets/js/13.c66af236.js"><link rel="prefetch" href="/blog/assets/js/14.6e1913fb.js"><link rel="prefetch" href="/blog/assets/js/15.e5335030.js"><link rel="prefetch" href="/blog/assets/js/16.e5e4dff6.js"><link rel="prefetch" href="/blog/assets/js/17.7828b76a.js"><link rel="prefetch" href="/blog/assets/js/18.c2107475.js"><link rel="prefetch" href="/blog/assets/js/19.c481a024.js"><link rel="prefetch" href="/blog/assets/js/20.bc72d36b.js"><link rel="prefetch" href="/blog/assets/js/21.fb38c257.js"><link rel="prefetch" href="/blog/assets/js/22.9ddbf54f.js"><link rel="prefetch" href="/blog/assets/js/23.2c593e6b.js"><link rel="prefetch" href="/blog/assets/js/24.86b7f628.js"><link rel="prefetch" href="/blog/assets/js/25.82ff0913.js"><link rel="prefetch" href="/blog/assets/js/26.f252f70a.js"><link rel="prefetch" href="/blog/assets/js/27.8be6d464.js"><link rel="prefetch" href="/blog/assets/js/28.5f6d1b09.js"><link rel="prefetch" href="/blog/assets/js/29.9bd082ce.js"><link rel="prefetch" href="/blog/assets/js/3.627099dc.js"><link rel="prefetch" href="/blog/assets/js/30.cd5ed503.js"><link rel="prefetch" href="/blog/assets/js/31.98240de1.js"><link rel="prefetch" href="/blog/assets/js/32.bfb506e0.js"><link rel="prefetch" href="/blog/assets/js/33.754e9987.js"><link rel="prefetch" href="/blog/assets/js/34.cac02bef.js"><link rel="prefetch" href="/blog/assets/js/35.582bc031.js"><link rel="prefetch" href="/blog/assets/js/36.b073d398.js"><link rel="prefetch" href="/blog/assets/js/4.cf05086d.js"><link rel="prefetch" href="/blog/assets/js/5.39612c53.js"><link rel="prefetch" href="/blog/assets/js/6.52ddd00a.js"><link rel="prefetch" href="/blog/assets/js/7.f71fbb16.js"><link rel="prefetch" href="/blog/assets/js/8.2f3f6f4d.js"><link rel="prefetch" href="/blog/assets/js/9.342a85f0.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.73b6f229.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/assets/img/hero.png" alt="Nav1ğŸª" class="logo"> <span class="site-name can-hide">Nav1ğŸª</span></a> <div class="links"><!----> <div class="user-settings"><a href="#" class="settings-button"><svg aria-hidden="true" data-prefix="fas" data-icon="cog" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-cog fa-w-16 settings-icon"><path fill="currentColor" d="M444.788 291.1l42.616 24.599c4.867 2.809 7.126 8.618 5.459 13.985-11.07 35.642-29.97 67.842-54.689 94.586a12.016 12.016 0 0 1-14.832 2.254l-42.584-24.595a191.577 191.577 0 0 1-60.759 35.13v49.182a12.01 12.01 0 0 1-9.377 11.718c-34.956 7.85-72.499 8.256-109.219.007-5.49-1.233-9.403-6.096-9.403-11.723v-49.184a191.555 191.555 0 0 1-60.759-35.13l-42.584 24.595a12.016 12.016 0 0 1-14.832-2.254c-24.718-26.744-43.619-58.944-54.689-94.586-1.667-5.366.592-11.175 5.459-13.985L67.212 291.1a193.48 193.48 0 0 1 0-70.199l-42.616-24.599c-4.867-2.809-7.126-8.618-5.459-13.985 11.07-35.642 29.97-67.842 54.689-94.586a12.016 12.016 0 0 1 14.832-2.254l42.584 24.595a191.577 191.577 0 0 1 60.759-35.13V25.759a12.01 12.01 0 0 1 9.377-11.718c34.956-7.85 72.499-8.256 109.219-.007 5.49 1.233 9.403 6.096 9.403 11.723v49.184a191.555 191.555 0 0 1 60.759 35.13l42.584-24.595a12.016 12.016 0 0 1 14.832 2.254c24.718 26.744 43.619 58.944 54.689 94.586 1.667 5.366-.592 11.175-5.459 13.985L444.788 220.9a193.485 193.485 0 0 1 0 70.2zM336 256c0-44.112-35.888-80-80-80s-80 35.888-80 80 35.888 80 80 80 80-35.888 80-80z"></path></svg></a> <div class="user-settings-menu" style="display:none;"><div class="theme-options"><!----> <ul class="color-theme-options"><li><a href="#" class="default-theme"></a></li> <li><a href="#" class="blue-theme"></a></li><li><a href="#" class="red-theme"></a></li><li><a href="#" class="purple-theme"></a></li></ul> <div class="dark-theme-options toggle-option"><label for="dark-theme-toggle">Enable Dark Theme?</label> <input id="dark-theme-toggle" type="checkbox"></div> <div class="ignore-themes-options toggle-option"><label for="ignore-themes-toggle">Ignore Other Themes?</label> <input id="ignore-themes-toggle" type="checkbox"></div> <!----></div></div></div> <!----> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/blog/introduction/" class="nav-link">
  intro
</a></div><div class="nav-item"><a href="/blog/project/" class="nav-link">
  æ‚é¡¹
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å‰ç«¯" class="dropdown-title"><span class="title">å‰ç«¯</span> <span class="arrow down"></span></button> <button type="button" aria-label="å‰ç«¯" class="mobile-dropdown-title"><span class="title">å‰ç«¯</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          åŸºç¡€
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/H5/" class="nav-link">
  HTML + CSS
</a></li><li class="dropdown-subitem"><a href="/blog/JavaScript/" class="nav-link">
  JS
</a></li><li class="dropdown-subitem"><a href="/blog/extends/" class="nav-link">
  JSç»§æ‰¿
</a></li><li class="dropdown-subitem"><a href="/blog/tsc/" class="nav-link">
  TSç±»å‹ä½“æ“
</a></li></ul></li><li class="dropdown-item"><h4>
          Vue
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/Vue/Vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-subitem"><a href="/blog/Vue/Vue-slot/" class="nav-link">
  Vueæ’æ§½æµ…æ
</a></li><li class="dropdown-subitem"><a href="/blog/Vue/Vue-mixin/" class="nav-link">
  åœ¨Vueä¸­ä½¿ç”¨æ··å…¥mixin
</a></li><li class="dropdown-subitem"><a href="/blog/Vue/Vue-devtools/" class="nav-link">
  å¦‚ä½•åœ¨æ§åˆ¶å°ä¸­è°ƒç”¨Vueå¼€å‘è€…å·¥å…·
</a></li><li class="dropdown-subitem"><a href="/blog/Vue/Vue3/" class="nav-link">
  Vue3åŸºç¡€
</a></li><li class="dropdown-subitem"><a href="/blog/Vue/Vue-reactive/" class="nav-link">
  Vueå“åº”å¼åŸç†
</a></li><li class="dropdown-subitem"><a href="/blog/Vue/Vue-nextTick/" class="nav-link">
  nectTickçš„åŸç†
</a></li><li class="dropdown-subitem"><a href="/blog/Vue/Vue-component/" class="nav-link">
  Vue.componentä¸Vue.extend
</a></li><li class="dropdown-subitem"><a href="/blog/Vue/Vue-diff/" class="nav-link">
  diffç®—æ³•çš„ä¸æ–­ä¼˜åŒ–
</a></li></ul></li><li class="dropdown-item"><h4>
          React
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/React/React/" class="nav-link">
  React
</a></li><li class="dropdown-subitem"><a href="/blog/React/React-life/" class="nav-link">
  Reactç”Ÿå‘½å‘¨æœŸ
</a></li><li class="dropdown-subitem"><a href="/blog/React/mobx/" class="nav-link">
  mobx
</a></li></ul></li><li class="dropdown-item"><h4>
          å°ç¨‹åº
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/miniprogram/" class="nav-link">
  miniprogram
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å·¥ç¨‹åŒ–" class="dropdown-title"><span class="title">å·¥ç¨‹åŒ–</span> <span class="arrow down"></span></button> <button type="button" aria-label="å·¥ç¨‹åŒ–" class="mobile-dropdown-title"><span class="title">å·¥ç¨‹åŒ–</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Node.js
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/node/base/" class="nav-link">
  åŸºç¡€
</a></li></ul></li><li class="dropdown-item"><h4>
          webpack
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/webpack/base/" class="nav-link">
  webpackåŸºç¡€
</a></li><li class="dropdown-subitem"><a href="/blog/webpack/split/" class="nav-link">
  webpackåˆ†åŒ…
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/blog/network/" class="nav-link">
  ç½‘ç»œ
</a></div><div class="nav-item"><a href="/blog/algorithm/" class="nav-link">
  ç®—æ³•
</a></div><div class="nav-item"><a href="/blog/cs/" class="nav-link">
  CSè¯¾ç¨‹
</a></div><div class="nav-item"><a href="/blog/others/" class="nav-link">
  å…¶ä»–
</a></div><div class="nav-item"><a href="https://google.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  External
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/blog/introduction/" class="nav-link">
  intro
</a></div><div class="nav-item"><a href="/blog/project/" class="nav-link">
  æ‚é¡¹
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å‰ç«¯" class="dropdown-title"><span class="title">å‰ç«¯</span> <span class="arrow down"></span></button> <button type="button" aria-label="å‰ç«¯" class="mobile-dropdown-title"><span class="title">å‰ç«¯</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          åŸºç¡€
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/H5/" class="nav-link">
  HTML + CSS
</a></li><li class="dropdown-subitem"><a href="/blog/JavaScript/" class="nav-link">
  JS
</a></li><li class="dropdown-subitem"><a href="/blog/extends/" class="nav-link">
  JSç»§æ‰¿
</a></li><li class="dropdown-subitem"><a href="/blog/tsc/" class="nav-link">
  TSç±»å‹ä½“æ“
</a></li></ul></li><li class="dropdown-item"><h4>
          Vue
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/Vue/Vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-subitem"><a href="/blog/Vue/Vue-slot/" class="nav-link">
  Vueæ’æ§½æµ…æ
</a></li><li class="dropdown-subitem"><a href="/blog/Vue/Vue-mixin/" class="nav-link">
  åœ¨Vueä¸­ä½¿ç”¨æ··å…¥mixin
</a></li><li class="dropdown-subitem"><a href="/blog/Vue/Vue-devtools/" class="nav-link">
  å¦‚ä½•åœ¨æ§åˆ¶å°ä¸­è°ƒç”¨Vueå¼€å‘è€…å·¥å…·
</a></li><li class="dropdown-subitem"><a href="/blog/Vue/Vue3/" class="nav-link">
  Vue3åŸºç¡€
</a></li><li class="dropdown-subitem"><a href="/blog/Vue/Vue-reactive/" class="nav-link">
  Vueå“åº”å¼åŸç†
</a></li><li class="dropdown-subitem"><a href="/blog/Vue/Vue-nextTick/" class="nav-link">
  nectTickçš„åŸç†
</a></li><li class="dropdown-subitem"><a href="/blog/Vue/Vue-component/" class="nav-link">
  Vue.componentä¸Vue.extend
</a></li><li class="dropdown-subitem"><a href="/blog/Vue/Vue-diff/" class="nav-link">
  diffç®—æ³•çš„ä¸æ–­ä¼˜åŒ–
</a></li></ul></li><li class="dropdown-item"><h4>
          React
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/React/React/" class="nav-link">
  React
</a></li><li class="dropdown-subitem"><a href="/blog/React/React-life/" class="nav-link">
  Reactç”Ÿå‘½å‘¨æœŸ
</a></li><li class="dropdown-subitem"><a href="/blog/React/mobx/" class="nav-link">
  mobx
</a></li></ul></li><li class="dropdown-item"><h4>
          å°ç¨‹åº
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/miniprogram/" class="nav-link">
  miniprogram
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å·¥ç¨‹åŒ–" class="dropdown-title"><span class="title">å·¥ç¨‹åŒ–</span> <span class="arrow down"></span></button> <button type="button" aria-label="å·¥ç¨‹åŒ–" class="mobile-dropdown-title"><span class="title">å·¥ç¨‹åŒ–</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Node.js
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/node/base/" class="nav-link">
  åŸºç¡€
</a></li></ul></li><li class="dropdown-item"><h4>
          webpack
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/webpack/base/" class="nav-link">
  webpackåŸºç¡€
</a></li><li class="dropdown-subitem"><a href="/blog/webpack/split/" class="nav-link">
  webpackåˆ†åŒ…
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/blog/network/" class="nav-link">
  ç½‘ç»œ
</a></div><div class="nav-item"><a href="/blog/algorithm/" class="nav-link">
  ç®—æ³•
</a></div><div class="nav-item"><a href="/blog/cs/" class="nav-link">
  CSè¯¾ç¨‹
</a></div><div class="nav-item"><a href="/blog/others/" class="nav-link">
  å…¶ä»–
</a></div><div class="nav-item"><a href="https://google.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  External
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>webpack åˆ†åŒ…</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/webpack/split.html#webpack-åˆ†åŒ…" class="sidebar-link">webpack åˆ†åŒ…</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/webpack/split.html#ä»€ä¹ˆæ˜¯-webpack" class="sidebar-link">ä»€ä¹ˆæ˜¯ Webpack</a></li><li class="sidebar-sub-header"><a href="/blog/webpack/split.html#ä¸ºä»€ä¹ˆè¦åˆ†åŒ…" class="sidebar-link">ä¸ºä»€ä¹ˆè¦åˆ†åŒ…</a></li><li class="sidebar-sub-header"><a href="/blog/webpack/split.html#ä»€ä¹ˆæ˜¯-splitchunksplugin" class="sidebar-link">ä»€ä¹ˆæ˜¯ SplitChunksPlugin</a></li></ul></li><li><a href="/blog/webpack/split.html#splitchunksplugin-çš„åˆ†åŒ…ä¼˜åŒ–" class="sidebar-link">SplitChunksPlugin çš„åˆ†åŒ…ä¼˜åŒ–</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/webpack/split.html#é…ç½®é¡¹" class="sidebar-link">é…ç½®é¡¹</a></li><li class="sidebar-sub-header"><a href="/blog/webpack/split.html#æºç è§£è¯»" class="sidebar-link">æºç è§£è¯»</a></li><li class="sidebar-sub-header"><a href="/blog/webpack/split.html#æºç æ€»ç»“" class="sidebar-link">æºç æ€»ç»“</a></li></ul></li><li><a href="/blog/webpack/split.html#ç»“æŸè¯­" class="sidebar-link">ç»“æŸè¯­</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/webpack/split.html#æ€è€ƒ" class="sidebar-link">æ€è€ƒ</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="webpack-åˆ†åŒ…"><a href="#webpack-åˆ†åŒ…" class="header-anchor">#</a> webpack åˆ†åŒ…</h2> <h3 id="ä»€ä¹ˆæ˜¯-webpack"><a href="#ä»€ä¹ˆæ˜¯-webpack" class="header-anchor">#</a> ä»€ä¹ˆæ˜¯ Webpack</h3> <p>ä¸ºæ–¹ä¾¿éå‰ç«¯äººå‘˜çœ‹æ‡‚æœ¬æ–‡ï¼Œå…ˆè°ˆè°ˆ Webpack æ˜¯ä»€ä¹ˆã€‚ç®€å•æ¥è¯´ï¼ŒWebpack æ˜¯ä¸€ç§æ‰“åŒ…å·¥å…·ï¼Œç”¨äºä»£ç çš„å‹ç¼©ã€æ··æ·†ã€ç¼–è¯‘ç­‰ç­‰ã€‚è€Œåœ¨ Webpack çš„é…ç½®æ–‡ä»¶ä¸­ï¼Œæœ‰ä¸¤ä¸ªéå¸¸é‡è¦çš„é€‰é¡¹ï¼šLoader å’Œ Pluginã€‚ç”±äº Webpack åªè®¤è¯† .js å’Œ .json ä¸¤ç§æ–‡ä»¶ï¼Œå› æ­¤ Loader æ‹…ä»»ç¿»è¯‘å®˜è¿™ä¸€è§’è‰²ï¼Œç”¨äºèµ„æºè½¬è¯‘(å¦‚.less, .jsx)ï¼Œè€Œ Plugin ç”¨äºç›‘å¬ Webpack ç”Ÿå‘½å‘¨æœŸå¹¿æ’­å‡ºäº‹ä»¶ï¼Œä»è€Œæ”¹å˜æ‰“åŒ…ç»“æœï¼Œä¹Ÿå°±æ˜¯èƒ½å¤Ÿæ‹“å±• Webpack çš„åŠŸèƒ½ã€‚è¿™ç¯‡æ–‡ç« çš„ä¸»é¢˜åˆ™æ˜¯é…ç½®æ–‡ä»¶çš„å¦ä¸€ä¸ªé€‰é¡¹ optimization ä¸­çš„ splitChunks å­—æ®µã€‚</p> <h3 id="ä¸ºä»€ä¹ˆè¦åˆ†åŒ…"><a href="#ä¸ºä»€ä¹ˆè¦åˆ†åŒ…" class="header-anchor">#</a> ä¸ºä»€ä¹ˆè¦åˆ†åŒ…</h3> <ol><li>ä»£ç åˆ†å‰²çš„æœ¬è´¨æ˜¯ï¼Ÿ</li></ol> <ul><li>å¦‚æœæºä»£ç ç›´æ¥ä¸Šçº¿ï¼šè™½ç„¶è¿‡ç¨‹å¯æ§ï¼Œä½†æ˜¯ http è¯·æ±‚å¤šï¼Œæ€§èƒ½å¼€é”€å¤§ï¼›å¦‚æœåˆ†åŒ…è¿‡å¤šï¼Œåˆ™ä¹Ÿä¼šé€ æˆ http è¯·æ±‚è¿‡å¤š</li> <li>å¦‚æœåªç”Ÿæˆä¸€ä¸ª bundleï¼Œè™½ç„¶æœåŠ¡å™¨å‹åŠ›å°ï¼Œä½†æ˜¯é¡µé¢ç©ºç™½æœŸé•¿ï¼Œç”¨æˆ·ä½“éªŒä¸å¥½</li></ul> <ol start="2"><li>ç”±äº Webpack ä¼šæŒ‰ç…§è®¾ç½®çš„å…¥å£æ–‡ä»¶ entry æ¥å¯»æ‰¾æ¨¡å—é—´çš„ä¾èµ–å…³ç³»ï¼Œå¦‚æœåªè®¾ç½®äº†å•å…¥å£ï¼Œç†è®ºä¸Šæ¥è¯´æœ€ç»ˆçš„æ‰“åŒ…ç»“æœæ˜¯ä¸€ä¸ªå•ç‹¬çš„åŒ…ï¼Œä½†åœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œè¿™æ ·åšå¯¹å‰ç«¯æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒçš„å½±å“æ˜¯å·¨å¤§çš„ï¼Œä¸»è¦æœ‰ä¸¤ä¸ªç¼ºç‚¹ï¼š</li></ol> <ul><li><strong>ç­‰å¾…æ—¶é—´æ¼«é•¿</strong>ï¼šå®¢æˆ·ç«¯å¿…é¡»ç­‰åˆ°æ•´ä¸ªé¡¹ç›®å…¨éƒ¨åŠ è½½å¥½ä¹‹åæ‰èƒ½è¿è¡Œï¼Œæå…¶ç¼“æ…¢ã€‚</li> <li><strong>ç¼“å­˜éš¾ä»¥å‘½ä¸­</strong>ï¼šæ›´æ”¹æŸå¤„çš„ä»£ç åï¼Œéœ€è¦é‡æ–°è·å–æ‰€æœ‰èµ„æºï¼Œæ²¡æœ‰åˆ©ç”¨å¥½æµè§ˆå™¨çš„ç¼“å­˜æœºåˆ¶ã€‚</li></ul> <ol start="3"><li>å› æ­¤åœ¨æ‰“åŒ…è¿‡ç¨‹ä¸­éœ€è¦æ‹†åˆ†ä»£ç ï¼Œä»è€Œæå‡ç”¨æˆ·ä½“éªŒã€‚Webpack æœ¬èº«å…·æœ‰é»˜è®¤çš„åˆ†åŒ…è§„åˆ™ï¼Œæ‰“åŒ…è¿‡ç¨‹æœ¬è´¨ä¸Šå°±æ˜¯ç”± module åˆ° chunk çš„è¿‡ç¨‹ï¼Œè¿™ä¸€è¿‡ç¨‹çš„æ ¸å¿ƒæ˜¯ Webpack çš„ seal é˜¶æ®µï¼Œæœ€ç»ˆç”Ÿæˆçš„ chunk ç±»å‹æœ‰ä¸‰ç§ï¼š</li></ol> <ul><li>åŒä¸€å…¥å£è§¦è¾¾åˆ°çš„æ¨¡å—ï¼Œç§°ä¸º <strong>initial chunk</strong></li> <li>å¼‚æ­¥æ¨¡å—ï¼Œå¦‚ ES6 çš„åŠ¨æ€å¼•å…¥ import()ï¼Œç§°ä¸º <strong>async chunk</strong></li> <li>entry.runtime ç»„æˆçš„ chunkï¼Œç§°ä¸º <strong>runtime chunk</strong></li></ul> <ol start="4"><li>åœ¨ Webpack3 ä¹‹å‰å°±æ˜¯é‡‡ç”¨è¿™ç§é»˜è®¤ç­–ç•¥ï¼Œæœ€å¤§çš„é—®é¢˜å°±æ˜¯ä¸èƒ½è§£å†³<strong>é‡å¤ä¾èµ–</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´å¤šä¸ªå…¥å£ä¸­å¼•å…¥äº†åŒç§ä¾èµ–ï¼Œä¼šè¢«é‡å¤æ‰“åŒ…ï¼Œæå…¶å½±å“æ€§èƒ½ã€‚å› æ­¤åœ¨ Webpack3 ä¸­å¼•å…¥äº† CommonChunkPlugin æ¥è§£å†³è¿™ä¸€é—®é¢˜ï¼Œè€Œ CommonChunkPlugin çš„ç¼ºé™·åœ¨äºæ— æ³•åˆ¤æ–­å…¬å…±ä¾èµ–æ˜¯çˆ¶ chunk è¿˜æ˜¯å­ chunkï¼Œä»è€Œä¼šå¯¼è‡´å…¶ä»–é—®é¢˜ã€‚</li></ol> <p>æ³¨ï¼š</p> <ul><li>ä¸€èˆ¬ä¸€ä¸ª chunk å¯¹åº”ä¸€ä¸ª bundle</li> <li>chunk æŒ‡çš„æ˜¯ webpack æ‰“åŒ…è¿‡ç¨‹ä¸­çš„å•ä½ï¼Œbundle æŒ‡çš„æ˜¯æœ€é‡ç”Ÿæˆçš„æ–‡ä»¶</li></ul> <h3 id="ä»€ä¹ˆæ˜¯-splitchunksplugin"><a href="#ä»€ä¹ˆæ˜¯-splitchunksplugin" class="header-anchor">#</a> ä»€ä¹ˆæ˜¯ SplitChunksPlugin</h3> <p>ä» Webpack4 å¼€å§‹ï¼Œå¼•å…¥äº†ä¸€ä¸ªå†…ç½®çš„ Plugin ï¼šSplitChunksPluginï¼Œå®ç°äº†æ›´åŠ æ™ºèƒ½ä¸å…¨é¢çš„åˆ†åŒ…ç­–ç•¥ã€‚åœ¨ Webpack çš„é…ç½®æ–‡ä»¶ä¸­ä½ç½®å¦‚ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'file1.js'</span><span class="token punctuation">,</span><span class="token string">'file2.js'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    splitChunks<span class="token operator">:</span> <span class="token punctuation">{</span>
      chunks<span class="token operator">:</span> <span class="token string">'all'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>ä¸Šæ–‡æåˆ° Plugin æ˜¯é€šè¿‡ç›‘å¬ Webpack äº‹ä»¶ä»è€Œå®ç°ç›¸åº”çš„åŠŸèƒ½ï¼Œæœ¬æ–‡ä½¿ç”¨<a href="https://github.com/webpack/webpack/tree/webpack-4" target="_blank" rel="noopener noreferrer">Webpack4 æºç <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>è¿›è¡Œåˆ†æï¼Œä» webpack/lib/optimize/SplitChunksPlugin.js æ–‡ä»¶ä¸­å¯ä»¥çœ‹åˆ°ï¼Œè¯¥ Plugin è®¢é˜…äº† optimizeChunksAdvanced é’©å­ï¼ˆæ–‡ä»¶çš„ç¬¬ 352 è¡Œå¼€å§‹ï¼‰ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// SplitChunksPlugin.js</span>
<span class="token function">apply</span><span class="token punctuation">(</span><span class="token parameter">compiler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>thisCompilation<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">&quot;SplitChunksPlugin&quot;</span><span class="token punctuation">,</span> <span class="token parameter">compilation</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> alreadyOptimized <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    compilation<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>unseal<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">&quot;SplitChunksPlugin&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      alreadyOptimized <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    compilation<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>optimizeChunksAdvanced<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span>
      <span class="token string">&quot;SplitChunksPlugin&quot;</span><span class="token punctuation">,</span>
      <span class="token parameter">chunks</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	    <span class="token comment">//  ...</span>
	   <span class="token punctuation">}</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è€Œåœ¨ lib/Compilation.js æ–‡ä»¶ä¸­ï¼Œcompilation.seal æ–¹æ³•å®šä¹‰äº†ä¸€ç³»åˆ—é’©å­ï¼ˆæ–‡ä»¶çš„ 1283 è¡Œå¼€å§‹ï¼‰ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Compilation.js</span>
<span class="token function">seal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// ...</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>hooks<span class="token punctuation">.</span><span class="token function">optimizeChunksAdvanced</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>chunks<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>chunkGroups<span class="token punctuation">)</span>
	<span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æ²¡é”™ï¼Œå°±æ˜¯é‡‡ç”¨äº†å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œä¸Šè¿°ä¸¤ä¸ªä»£ç å—å°† Webpack ä¸ Plugin è¿›è¡Œè¿æ¥ï¼Œå› æ­¤ï¼Œåœ¨ Webpack çš„ seal é˜¶æ®µï¼ŒSplitChunksPlugin å¯ä»¥å¯¹é»˜è®¤åˆ†åŒ…è§„åˆ™æ‰€ç”Ÿæˆçš„ chunk åšè¿›ä¸€æ­¥çš„ä¼˜åŒ–ã€‚</p> <h2 id="splitchunksplugin-çš„åˆ†åŒ…ä¼˜åŒ–"><a href="#splitchunksplugin-çš„åˆ†åŒ…ä¼˜åŒ–" class="header-anchor">#</a> SplitChunksPlugin çš„åˆ†åŒ…ä¼˜åŒ–</h2> <h3 id="é…ç½®é¡¹"><a href="#é…ç½®é¡¹" class="header-anchor">#</a> é…ç½®é¡¹</h3> <p>ä»å®˜æ–¹æ–‡æ¡£ä¸­å¯ä»¥çœ‹åˆ° optimization.splitChunks çš„<a href="https://webpack.docschina.org/plugins/split-chunks-plugin/#splitchunkschunks" target="_blank" rel="noopener noreferrer">v5 é»˜è®¤é…ç½®<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>æˆ–<a href="https://v4.webpack.docschina.org/plugins/split-chunks-plugin/#splitchunkscachegroups" target="_blank" rel="noopener noreferrer">v4 é»˜è®¤é…ç½®<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼Œè¿™é‡Œä»¥ v4 ä¸ºä¾‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    splitChunks<span class="token operator">:</span> <span class="token punctuation">{</span>
      chunks<span class="token operator">:</span> <span class="token string">'async'</span><span class="token punctuation">,</span>
      minSize<span class="token operator">:</span> <span class="token number">30000</span><span class="token punctuation">,</span>
      maxSize<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      minChunks<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      maxAsyncRequests<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
      maxInitialRequests<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
      automaticNameDelimiter<span class="token operator">:</span> <span class="token string">'~'</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      cacheGroups<span class="token operator">:</span> <span class="token punctuation">{</span>
        vendors<span class="token operator">:</span> <span class="token punctuation">{</span>
          test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\\/]node_modules[\\/]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
          priority<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          minChunks<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
          priority<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">,</span>
          reuseExistingChunk<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>é€‰æ‹©å…¶ä¸­å‡ ä¸ªé…ç½®é¡¹è¿›è¡Œè¯´æ˜ï¼š</p> <ul><li>enforceSizeThresholdï¼šè¶…è¿‡ enforceSizeThreshold å­—èŠ‚æ•°çš„ chunk ä¼šè¢«<strong>å¼ºåˆ¶åˆ†åŒ…</strong>ï¼Œå¿½ç•¥é…ç½®ä¸­çš„å…¶ä»–å°ºå¯¸é™åˆ¶ã€‚</li> <li>chunksï¼šé»˜è®¤ä¸º async ï¼Œå³åªå¯¹ async chunk èµ·ä½œç”¨ã€‚è®¾ç½®ä¸º initial åˆ™åªå¯¹ initial chunk ç”Ÿæ•ˆã€‚è¿˜å¯ä»¥è®¾ç½®ä¸º<strong>all</strong>ï¼Œè¿™æ˜¯å®é™…é¡¹ç›®ä¸­æœ€å¸¸ç”¨çš„ï¼Œä½¿ splitChunksPlugin åŒæ—¶ä½œç”¨äº initial chunk å’Œ async chunkã€‚</li> <li>minChunksï¼šè¢«ä¸åŒçš„ chunk æ‰€<strong>å¼•ç”¨çš„æ¬¡æ•°</strong>ï¼Œè¿™é‡Œçš„ chunk åŒ…æ‹¬ initial chunk å’Œ async chunkã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœ minChunks = 2ï¼Œåˆ™å½“æŸä¸ªæ¨¡å—è¢«è‡³å°‘ä¸¤ä¸ª chunk å¼•ç”¨æ—¶ï¼Œè¿™ä¸ªæ¨¡å—æ‰ä¼šè¢«å•ç‹¬æ‰“åŒ…ã€‚</li> <li>minSizeï¼šè¶…è¿‡ minSize å­—èŠ‚çš„ chunk æ‰ä¼šè¢«åˆ†åŒ…ï¼Œå¦åˆ™è¯¥ module åˆå¹¶å›åŸæ¥çš„ chunk ä¸­ã€‚</li> <li>maxSizeï¼šè¶…è¿‡ maxSize å­—èŠ‚çš„ chunk ä¼š<strong>ç»§ç»­å°è¯•</strong>åˆ†åŒ…</li> <li>maxInitialRequest/maxAsyncRequestsï¼š<strong>é™åˆ¶åˆ†åŒ…æ•°é‡</strong>ã€‚è®¾ç½® initial chunk/async chunk çš„æœ€å¤§å¹¶è¡Œè¯·æ±‚æ•°ï¼Œè¯·æ±‚æ•°æŒ‡çš„æ˜¯ä¸» chunkï¼ˆæŒ‡è‡ªèº«ï¼Œä¸åŒ…æ‹¬ async chunkï¼‰åŠ å­åŒæ­¥ chunkï¼ˆä¸åŒ…æ‹¬ async chunkï¼‰ã€‚</li> <li>cacheGroupsï¼šç¼“å­˜ç»„ï¼Œä¸º test æˆ– type å­—æ®µåŒ¹é…åˆ°çš„æ–‡ä»¶åˆ¶è®¢ä¸“ç”¨çš„åˆ†åŒ…è§„åˆ™ï¼Œå¹¶ä¸”ä¼˜å…ˆçº§å¤§äºå…¨å±€è§„åˆ™ã€‚è¿™ä¸€é¡¹æ˜¯é…ç½®çš„é‡ç‚¹ã€‚</li></ul> <h3 id="æºç è§£è¯»"><a href="#æºç è§£è¯»" class="header-anchor">#</a> æºç è§£è¯»</h3> <p>ä¸Šæ–‡è¯´è¿‡å³ä½¿ä¸è®¾ç½® optimization.splitChunks ï¼Œä¹Ÿæ˜¯æœ‰é»˜è®¤é…ç½®çš„ï¼Œçœ‹æºç å¯ä»¥å‘ç°æ–‡ä»¶ä½äº lib/WebpackOptionsDefaulter.jsï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// WebpackOptionsDefaulter.js</span>
<span class="token comment">// ...</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'optimization.splitChunks.chunks'</span><span class="token punctuation">,</span> <span class="token string">'async'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'optimization.splitChunks.minSize'</span><span class="token punctuation">,</span> <span class="token string">'make'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">isProductionLikeMode</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">30000</span> <span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'optimization.splitChunks.minChunks'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'optimization.splitChunks.maxAsyncRequests'</span><span class="token punctuation">,</span> <span class="token string">'make'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">isProductionLikeMode</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">5</span> <span class="token operator">:</span> <span class="token number">Infinity</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'optimization.splitChunks.automaticNameDelimiter'</span><span class="token punctuation">,</span> <span class="token string">'~'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'optimization.splitChunks.automaticNameMaxLength'</span><span class="token punctuation">,</span> <span class="token number">109</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'optimization.splitChunks.maxInitialRequests'</span><span class="token punctuation">,</span> <span class="token string">'make'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">isProductionLikeMode</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">3</span> <span class="token operator">:</span> <span class="token number">Infinity</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'optimization.splitChunks.name'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'optimization.splitChunks.cacheGroups'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'optimization.splitChunks.cacheGroups.default'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  automaticNamePrefix<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
  reuseExistingChunk<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  minChunks<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  priority<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'optimization.splitChunks.cacheGroups.vendors'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  automaticNamePrefix<span class="token operator">:</span> <span class="token string">'vendors'</span><span class="token punctuation">,</span>
  test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\\/]node_modules[\\/]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
  priority<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ...</span>
</code></pre></div><p>å¯ä»¥çœ‹å‡ºï¼Œä¸å®˜æ–¹æ–‡æ¡£é‡Œçš„é»˜è®¤é…ç½®æ˜¯å®Œå…¨å»åˆçš„ã€‚</p><div></div>
æ¥ä¸‹æ¥è¦ä» splitChunksPlugin æºç ä¸­æ‰¾åˆ°å¯¹åº”çš„å„é…ç½®é¡¹åŠ<strong>ä¼˜å…ˆçº§</strong>ï¼Œç†è§£ <strong>splitChunksPlugin çš„æ€»ä½“æµç¨‹</strong>ï¼š<p></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// lib/optimize/SplitChunksPlugin.js</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> module <span class="token keyword">of</span> compilation<span class="token punctuation">.</span>modules<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// è¿™ä¸€æ­¥éå†moduleå¹¶è·å–å¯¹åº”çš„cacheGroups</span>
  <span class="token keyword">let</span> cacheGroups <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span><span class="token function">getCacheGroups</span><span class="token punctuation">(</span>module<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>cacheGroups<span class="token punctuation">)</span> <span class="token operator">||</span> cacheGroups<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">continue</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">//...</span>

  <span class="token keyword">let</span> cacheGroupIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> cacheGroupSource <span class="token keyword">of</span> cacheGroups<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//éå†cacheGroupsï¼Œä¼˜å…ˆé€‰æ‹©cacheGroupsä¸­é…ç½®é¡¹ï¼Œæ²¡æœ‰åˆ™å–å…¨å±€é…ç½®</span>
    <span class="token keyword">const</span> minSize <span class="token operator">=</span>
      cacheGroupSource<span class="token punctuation">.</span>minSize <span class="token operator">!==</span> <span class="token keyword">undefined</span>
        <span class="token operator">?</span> cacheGroupSource<span class="token punctuation">.</span>minSize
        <span class="token operator">:</span> cacheGroupSource<span class="token punctuation">.</span>enforce
        <span class="token operator">?</span> <span class="token number">0</span>
        <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>minSize<span class="token punctuation">;</span>
    <span class="token keyword">const</span> enforceSizeThreshold <span class="token operator">=</span>
      cacheGroupSource<span class="token punctuation">.</span>enforceSizeThreshold <span class="token operator">!==</span> <span class="token keyword">undefined</span>
        <span class="token operator">?</span> cacheGroupSource<span class="token punctuation">.</span>enforceSizeThreshold
        <span class="token operator">:</span> cacheGroupSource<span class="token punctuation">.</span>enforce
        <span class="token operator">?</span> <span class="token number">0</span>
        <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>enforceSizeThreshold<span class="token punctuation">;</span>
    <span class="token keyword">const</span> cacheGroup <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
      minSize<span class="token punctuation">,</span>
      minSizeForMaxSize<span class="token operator">:</span> cacheGroupSource<span class="token punctuation">.</span>minSize <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> cacheGroupSource<span class="token punctuation">.</span>minSize <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>minSize<span class="token punctuation">,</span>
      enforceSizeThreshold<span class="token punctuation">,</span>
      maxSize<span class="token operator">:</span>
        cacheGroupSource<span class="token punctuation">.</span>maxSize <span class="token operator">!==</span> <span class="token keyword">undefined</span>
          <span class="token operator">?</span> cacheGroupSource<span class="token punctuation">.</span>maxSize
          <span class="token operator">:</span> cacheGroupSource<span class="token punctuation">.</span>enforce
          <span class="token operator">?</span> <span class="token number">0</span>
          <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>maxSize<span class="token punctuation">,</span>
      minChunks<span class="token operator">:</span>
        cacheGroupSource<span class="token punctuation">.</span>minChunks <span class="token operator">!==</span> <span class="token keyword">undefined</span>
          <span class="token operator">?</span> cacheGroupSource<span class="token punctuation">.</span>minChunks
          <span class="token operator">:</span> cacheGroupSource<span class="token punctuation">.</span>enforce
          <span class="token operator">?</span> <span class="token number">1</span>
          <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>minChunks<span class="token punctuation">,</span>
      <span class="token comment">// ...</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">// éå†åŒ…å«åŒä¸€moduleçš„chunké›†åˆ</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> chunkCombination <span class="token keyword">of</span> combs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// åˆ¤æ–­æ˜¯å¦å‘½ä¸­minChunksè§„åˆ™</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>chunkCombination<span class="token punctuation">.</span>size <span class="token operator">&lt;</span> cacheGroup<span class="token punctuation">.</span>minChunks<span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>
      <span class="token comment">// å‘½ä¸­minChunksè§„åˆ™çš„è®¾ç½®ä¸ºselectedChunks</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> chunks<span class="token operator">:</span> selectedChunks<span class="token punctuation">,</span> key<span class="token operator">:</span> selectedChunksKey <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">getSelectedChunks</span><span class="token punctuation">(</span>
        chunkCombination<span class="token punctuation">,</span>
        cacheGroup<span class="token punctuation">.</span>chunksFilter<span class="token punctuation">,</span> <span class="token comment">// åˆ¤æ–­chunksæ˜¯allã€initialæˆ–async</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// å‘chunksInfoMapä¸­æ·»åŠ ä»£ç åˆ†å‰²ä¿¡æ¯</span>
      <span class="token function">addModuleToChunksInfoMap</span><span class="token punctuation">(</span>cacheGroup<span class="token punctuation">,</span> cacheGroupIndex<span class="token punctuation">,</span> selectedChunks<span class="token punctuation">,</span> selectedChunksKey<span class="token punctuation">,</span> module<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    cacheGroupIndex<span class="token operator">++</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¯¥éƒ¨åˆ†ä»£ç æ€»ç»“ï¼š</p><div></div><p></p> <ol><li>å¤–éƒ¨ for å¾ªç¯éå† moduleï¼Œå†…éƒ¨ for å¾ªç¯éå† cacheGroupsï¼Œå¹¶ä¸” cacheGroups ä¼˜å…ˆçº§å¤§äºå…¨å±€é…ç½®ï¼Œä»è€Œåˆå§‹åŒ– cacheGroups çš„å€¼ã€‚</li> <li>åˆ¤æ–­ chunk çš„è¢«å¼•ç”¨æ¬¡æ•°æ˜¯å¦å‘½ä¸­ cacheGroup.minChunksã€‚</li> <li>åˆ¤æ–­ chunks ç±»å‹æ˜¯ allã€initial è¿˜æ˜¯ asyncã€‚</li> <li>å¾—åˆ° selectedChunks å¹¶å­˜å…¥ chunksInfoMapã€‚</li></ol> <p>æ¥ä¸‹æ¥å¼€å§‹éå† chunksInfoMapï¼Œå°†ä¸ç¬¦åˆ minSize è§„åˆ™çš„ chunk ä» chunksInfoMap ä¸­å‰”é™¤ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> pair <span class="token keyword">of</span> chunksInfoMap<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> info <span class="token operator">=</span> pair<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>info<span class="token punctuation">.</span>cacheGroup<span class="token punctuation">.</span>_validateSize <span class="token operator">&amp;&amp;</span> info<span class="token punctuation">.</span>size <span class="token operator">&lt;</span> info<span class="token punctuation">.</span>cacheGroup<span class="token punctuation">.</span>minSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    chunksInfoMap<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>pair<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>éå† chunksInfoMapï¼Œæ ¹æ® compareEntries æ–¹æ³•æ‰¾åˆ°ä¼˜å…ˆçº§æœ€å¤§çš„ chunkï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> bestEntryKey<span class="token punctuation">;</span>
<span class="token keyword">let</span> bestEntry<span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> pair <span class="token keyword">of</span> chunksInfoMap<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> key <span class="token operator">=</span> pair<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> info <span class="token operator">=</span> pair<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>bestEntry <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    bestEntry <span class="token operator">=</span> info<span class="token punctuation">;</span>
    bestEntryKey <span class="token operator">=</span> key<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">compareEntries</span><span class="token punctuation">(</span>bestEntry<span class="token punctuation">,</span> info<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// compareEntries æ–¹æ³•é‡ŒåŒ…å«å¾ˆå¤šè§„åˆ™</span>
    <span class="token comment">// å¦‚ä¼˜å…ˆçº§cacheGroup.priorityã€å…³è”çš„chunkæ•°chunks.sizeç­‰</span>
    <span class="token comment">// å…·ä½“å¯ä»¥çœ‹æºç ä¸­çš„compareEntrieså‡½æ•°</span>
    bestEntry <span class="token operator">=</span> info<span class="token punctuation">;</span>
    bestEntryKey <span class="token operator">=</span> key<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ç„¶åæ ¹æ® maxInitialRequests æˆ– maxAsyncRequests è§„åˆ™å¤„ç†å»é‡åçš„ selectedChunks( usedChunks )ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> usedChunks <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>selectedChunks<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>
  <span class="token operator">!</span>enforced <span class="token operator">&amp;&amp;</span>
  <span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token function">isFinite</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>cacheGroup<span class="token punctuation">.</span>maxInitialRequests<span class="token punctuation">)</span> <span class="token operator">||</span> Number<span class="token punctuation">.</span><span class="token function">isFinite</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>cacheGroup<span class="token punctuation">.</span>maxAsyncRequests<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> chunk <span class="token keyword">of</span> usedChunks<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ ¹æ®chunkç±»å‹é€‰æ‹©maxInitialRequestsæˆ–maxAsyncRequests</span>
    <span class="token keyword">const</span> maxRequests <span class="token operator">=</span> chunk<span class="token punctuation">.</span><span class="token function">isOnlyInitial</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token operator">?</span> item<span class="token punctuation">.</span>cacheGroup<span class="token punctuation">.</span>maxInitialRequests
      <span class="token operator">:</span> chunk<span class="token punctuation">.</span><span class="token function">canBeInitial</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token operator">?</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>cacheGroup<span class="token punctuation">.</span>maxInitialRequests<span class="token punctuation">,</span> item<span class="token punctuation">.</span>cacheGroup<span class="token punctuation">.</span>maxAsyncRequests<span class="token punctuation">)</span>
      <span class="token operator">:</span> item<span class="token punctuation">.</span>cacheGroup<span class="token punctuation">.</span>maxAsyncRequests<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isFinite</span><span class="token punctuation">(</span>maxRequests<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">getRequests</span><span class="token punctuation">(</span>chunk<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> maxRequests<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      usedChunks<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>chunk<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æœ€åä¸æ–­æ›´æ–° chunksInfoMapï¼Œç›´åˆ° chunksInfoMap ä¸ºç©ºæ—¶ï¼Œé€€å‡ºå¾ªç¯ï¼Œç»“æŸ SplitChunksã€‚</p> <h3 id="æºç æ€»ç»“"><a href="#æºç æ€»ç»“" class="header-anchor">#</a> æºç æ€»ç»“</h3> <p>ç»è¿‡å¯¹ SplitChunksPlugin çš„æºç åˆ†æå¯çŸ¥ï¼Œå…¶å¤§æ¦‚æµç¨‹å¯ä»¥æ€»ç»“ä¸ºï¼š</p> <ol><li>éå†æ‰€æœ‰æ¨¡å— moduleï¼Œå†…éƒ¨å†éå†æ‰€æœ‰ cacheGroupï¼Œå½“ç¬¦åˆ cacheGroup è§„åˆ™æ—¶ï¼Œæ ¹æ® cacheGroup å’Œ å…¨å±€é…ç½®æ¥åˆå§‹åŒ– cacheGroupã€‚</li> <li>åˆ¤æ–­ chunk æ˜¯å¦æ»¡è¶³ minChunksï¼Œæ»¡è¶³åˆ™ç»§ç»­ä¸‹ä¸€æ­¥éª¤ã€‚</li> <li>åˆ¤æ–­ chunks è§„åˆ™æ˜¯ allã€initial æˆ– asyncï¼Œç¬¦åˆè§„åˆ™çš„ chunk ç»§ç»­ä¸‹ä¸€æ­¥éª¤ã€‚</li> <li>å°†å¾—åˆ°çš„ split chunks ( selectedChunks )å­˜å…¥ chunksInfoMapã€‚</li> <li>éå† chunksInfoMapï¼Œåˆ¤æ–­ minSize æ˜¯å¦ç¬¦åˆè§„åˆ™ã€‚</li> <li>éå† chunksInfoMapï¼Œæ ¹æ® compareEntries ç­–ç•¥ä¼˜å…ˆç”Ÿæˆ chunkã€‚</li> <li>éå† usedChunksï¼Œåˆ¤æ–­ chunk æ˜¯å¦æ»¡è¶³ maxInitialRequests å’Œ maxAsyncRequests è§„åˆ™ã€‚</li> <li>åˆ›å»ºæ–°çš„ chunk æˆ–å¤ç”¨ç°æœ‰çš„ chunkï¼Œä¸æ–­æ›´æ–° chunksInfoMapã€‚</li> <li>ç»“æŸ SplitChunksã€‚</li></ol> <h2 id="ç»“æŸè¯­"><a href="#ç»“æŸè¯­" class="header-anchor">#</a> ç»“æŸè¯­</h2> <p>æ¯”è¾ƒå¸¸ç”¨çš„ SplitChunksPlugin åˆ†åŒ…ç­–ç•¥æœ‰ï¼š</p> <ul><li>å…¨å±€çš„ chunks è®¾ç½®ä¸º allï¼Œè¿™æ ·å¯¹ initial chunk å’Œ async chunk éƒ½æœ‰æ•ˆã€‚</li> <li>ç¬¬ä¸‰æ–¹åº“å•ç‹¬åˆ†åŒ…ï¼Œæ¯”å¦‚é¡¹ç›®æ¡†æ¶ Vueã€Reactï¼ŒçŠ¶æ€ç®¡ç†å·¥å…· Vuexã€Reduxã€MobX ç­‰ã€‚</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>splitChunks<span class="token operator">:</span> <span class="token punctuation">{</span>
  chunks<span class="token operator">:</span> <span class="token string">'all'</span><span class="token punctuation">,</span>
  cacheGroups<span class="token operator">:</span> <span class="token punctuation">{</span>
    dll<span class="token operator">:</span> <span class="token punctuation">{</span>
      test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\\/]node_modules[\\/](react|react-dom|react-dom-router|mobx|mobx-react|mobx-react-dom|antd)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
      minChunks<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      priority<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> <span class="token string">'dll'</span><span class="token punctuation">,</span> <span class="token comment">// æ‰“åŒ…åçš„æ–‡ä»¶åä¸ºdll</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>è·¯ç”±æ‡’åŠ è½½ï¼ˆå¼‚æ­¥åŠ è½½ï¼‰ï¼Œå¦‚ ES6 çš„ import() è¯­æ³•ã€‚</li></ul> <div class="language- extra-class"><pre class="language-text"><code>{
  path: '/login', // è·¯ç”±è·¯å¾„
  name: 'ç™»å½•é¡µ', // èœå•åç§°
  component: lazy(() =&gt; import('@/pages/Login')), // æ‡’åŠ è½½è·¯ç”±ç»„ä»¶
},
</code></pre></div><p>ä½¿ç”¨ WebpackBundleAnalyzer è¿›è¡Œæ‰“åŒ…å¯è§†åŒ–åˆ†æï¼Œå›¾ 1 æ˜¯ä½¿ç”¨é»˜è®¤åˆ†åŒ…è§„åˆ™ï¼Œå›¾ 2 è®¾ç½®äº†å…¨å±€çš„ chunks = allï¼Œå¹¶ä¸”è®¾ç½®äº†ä¸€äº›ç¬¬ä¸‰æ–¹åº“å•ç‹¬åˆ†åŒ…ã€‚
å¯ä»¥çœ‹å‡ºï¼Œç¬¬ä¸‰æ–¹åº“è¢«å•ç‹¬æ‰“åŒ…åˆ°äº† dll æ–‡ä»¶ä¸­ï¼Œå‡å°äº†ä¸»åŒ…ä½“ç§¯çš„åŒæ—¶ï¼Œä¹Ÿå……åˆ†åˆ©ç”¨äº†æµè§ˆå™¨çš„ç¼“å­˜ç­–ç•¥ï¼Œä»è€Œæå‡é¡¹ç›®æ€§èƒ½ã€‚
<img src="https://km.woa.com/gkm/api/img/cos-file-url?url=https%3A%2F%2Fkm-pro-1258638997.cos.ap-guangzhou.myqcloud.com%2Ffiles%2Fphotos%2Fpictures%2F202209%2F1663035306-2628-631fe7aa402ea-75649.png&amp;is_redirect=1" alt="å›¾1"></p> <div style="margin:0 auto;width:30px;">å›¾ 1</div> <p><img src="https://km.woa.com/gkm/api/img/cos-file-url?url=https%3A%2F%2Fkm-pro-1258638997.cos.ap-guangzhou.myqcloud.com%2Ffiles%2Fphotos%2Fpictures%2F202209%2F1663035506-3667-631fe8725989b-509520.png&amp;is_redirect=1" alt="å›¾2"></p> <div style="margin:0 auto;width:30px;">å›¾ 2</div> <h3 id="æ€è€ƒ"><a href="#æ€è€ƒ" class="header-anchor">#</a> æ€è€ƒ</h3> <p>æœ€åæ€è€ƒä¸€ä¸ªé—®é¢˜ï¼Œåˆ†åŒ…æ˜¯è¶Šå¤šè¶Šå¥½å—ï¼Ÿ
é¦–å…ˆè¦è‚¯å®šçš„æ˜¯ï¼Œå¦‚æœä¸æ‹†åˆ†ä»£ç ï¼Œæ‰“åŒ…æˆä¸€ä¸ªæ–‡ä»¶ä¼šå¯¼è‡´å“åº”é€Ÿåº¦å¾ˆæ…¢ï¼Œä¹Ÿæ²¡æœ‰å¾ˆå¥½åœ°åˆ©ç”¨æµè§ˆå™¨ç¼“å­˜æœºåˆ¶ã€‚è€Œå¦‚æœåˆ†åŒ…çš„é¢—ç²’åº¦è¿‡äºç»†åŒ–ï¼Œè™½ç„¶å¥½å¤„æ˜¯ç¼“å­˜ç²’åº¦ä¹Ÿæ›´ç»†åŒ–ï¼Œä½†ä¹Ÿå¯¼è‡´é¦–æ¬¡ HTTP è¯·æ±‚æ•°è¿‡å¤šï¼Œå½±å“æ€§èƒ½ã€‚å› æ­¤éœ€è¦ç»“åˆè‡ªå·±çš„é¡¹ç›®å…·ä½“åˆ†æï¼Œæ¯”å¦‚å¦‚æœä½¿ç”¨äº† HTTP2ï¼Œé‚£ä¹ˆå…¶å…·æœ‰çš„å¤šè·¯å¤ç”¨å’Œ headers å‹ç¼©èƒ½åŠ›ä¹Ÿè®¸å¯ä»¥å¿½ç•¥æ‰ HTTP è¯·æ±‚è¿‡å¤šè¿™ä¸€ç¼ºç‚¹ã€‚</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">1/5/2023, 3:54:16 PM</span></div></footer> <!----> </main></div><div class="global-ui"><div id="goTop" class="hide-cat" data-v-bf92849a></div></div></div>
    <script src="/blog/assets/js/app.99c8d667.js" defer></script><script src="/blog/assets/js/2.503560b4.js" defer></script><script src="/blog/assets/js/37.d520b5d0.js" defer></script>
  </body>
</html>
