<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>æ‰‹å†™ JS æ•°ç»„åŸå‹æ–¹æ³• | Nav1ğŸª</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text y=%22.9em%22 font-size=%2290%22&gt;ğŸ„&lt;/text&gt;&lt;/svg&gt;">
    <meta name="description" content="naviçš„ä¸ªäººblog">
    <meta name="author" content="navi">
    <meta name="keywords" content="navi">
    
    <link rel="preload" href="/blog/assets/css/0.styles.73b6f229.css" as="style"><link rel="preload" href="/blog/assets/js/app.99c8d667.js" as="script"><link rel="preload" href="/blog/assets/js/2.503560b4.js" as="script"><link rel="preload" href="/blog/assets/js/10.ff493e67.js" as="script"><link rel="prefetch" href="/blog/assets/js/11.8af03509.js"><link rel="prefetch" href="/blog/assets/js/12.ab40ab5c.js"><link rel="prefetch" href="/blog/assets/js/13.c66af236.js"><link rel="prefetch" href="/blog/assets/js/14.6e1913fb.js"><link rel="prefetch" href="/blog/assets/js/15.e5335030.js"><link rel="prefetch" href="/blog/assets/js/16.e5e4dff6.js"><link rel="prefetch" href="/blog/assets/js/17.7828b76a.js"><link rel="prefetch" href="/blog/assets/js/18.c2107475.js"><link rel="prefetch" href="/blog/assets/js/19.c481a024.js"><link rel="prefetch" href="/blog/assets/js/20.bc72d36b.js"><link rel="prefetch" href="/blog/assets/js/21.fb38c257.js"><link rel="prefetch" href="/blog/assets/js/22.9ddbf54f.js"><link rel="prefetch" href="/blog/assets/js/23.2c593e6b.js"><link rel="prefetch" href="/blog/assets/js/24.86b7f628.js"><link rel="prefetch" href="/blog/assets/js/25.82ff0913.js"><link rel="prefetch" href="/blog/assets/js/26.f252f70a.js"><link rel="prefetch" href="/blog/assets/js/27.8be6d464.js"><link rel="prefetch" href="/blog/assets/js/28.5f6d1b09.js"><link rel="prefetch" href="/blog/assets/js/29.9bd082ce.js"><link rel="prefetch" href="/blog/assets/js/3.627099dc.js"><link rel="prefetch" href="/blog/assets/js/30.cd5ed503.js"><link rel="prefetch" href="/blog/assets/js/31.98240de1.js"><link rel="prefetch" href="/blog/assets/js/32.bfb506e0.js"><link rel="prefetch" href="/blog/assets/js/33.754e9987.js"><link rel="prefetch" href="/blog/assets/js/34.cac02bef.js"><link rel="prefetch" href="/blog/assets/js/35.582bc031.js"><link rel="prefetch" href="/blog/assets/js/36.b073d398.js"><link rel="prefetch" href="/blog/assets/js/37.d520b5d0.js"><link rel="prefetch" href="/blog/assets/js/4.cf05086d.js"><link rel="prefetch" href="/blog/assets/js/5.39612c53.js"><link rel="prefetch" href="/blog/assets/js/6.52ddd00a.js"><link rel="prefetch" href="/blog/assets/js/7.f71fbb16.js"><link rel="prefetch" href="/blog/assets/js/8.2f3f6f4d.js"><link rel="prefetch" href="/blog/assets/js/9.342a85f0.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.73b6f229.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/assets/img/hero.png" alt="Nav1ğŸª" class="logo"> <span class="site-name can-hide">Nav1ğŸª</span></a> <div class="links"><!----> <div class="user-settings"><a href="#" class="settings-button"><svg aria-hidden="true" data-prefix="fas" data-icon="cog" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-cog fa-w-16 settings-icon"><path fill="currentColor" d="M444.788 291.1l42.616 24.599c4.867 2.809 7.126 8.618 5.459 13.985-11.07 35.642-29.97 67.842-54.689 94.586a12.016 12.016 0 0 1-14.832 2.254l-42.584-24.595a191.577 191.577 0 0 1-60.759 35.13v49.182a12.01 12.01 0 0 1-9.377 11.718c-34.956 7.85-72.499 8.256-109.219.007-5.49-1.233-9.403-6.096-9.403-11.723v-49.184a191.555 191.555 0 0 1-60.759-35.13l-42.584 24.595a12.016 12.016 0 0 1-14.832-2.254c-24.718-26.744-43.619-58.944-54.689-94.586-1.667-5.366.592-11.175 5.459-13.985L67.212 291.1a193.48 193.48 0 0 1 0-70.199l-42.616-24.599c-4.867-2.809-7.126-8.618-5.459-13.985 11.07-35.642 29.97-67.842 54.689-94.586a12.016 12.016 0 0 1 14.832-2.254l42.584 24.595a191.577 191.577 0 0 1 60.759-35.13V25.759a12.01 12.01 0 0 1 9.377-11.718c34.956-7.85 72.499-8.256 109.219-.007 5.49 1.233 9.403 6.096 9.403 11.723v49.184a191.555 191.555 0 0 1 60.759 35.13l42.584-24.595a12.016 12.016 0 0 1 14.832 2.254c24.718 26.744 43.619 58.944 54.689 94.586 1.667 5.366-.592 11.175-5.459 13.985L444.788 220.9a193.485 193.485 0 0 1 0 70.2zM336 256c0-44.112-35.888-80-80-80s-80 35.888-80 80 35.888 80 80 80 80-35.888 80-80z"></path></svg></a> <div class="user-settings-menu" style="display:none;"><div class="theme-options"><!----> <ul class="color-theme-options"><li><a href="#" class="default-theme"></a></li> <li><a href="#" class="blue-theme"></a></li><li><a href="#" class="red-theme"></a></li><li><a href="#" class="purple-theme"></a></li></ul> <div class="dark-theme-options toggle-option"><label for="dark-theme-toggle">Enable Dark Theme?</label> <input id="dark-theme-toggle" type="checkbox"></div> <div class="ignore-themes-options toggle-option"><label for="ignore-themes-toggle">Ignore Other Themes?</label> <input id="ignore-themes-toggle" type="checkbox"></div> <!----></div></div></div> <!----> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/blog/introduction/" class="nav-link">
  intro
</a></div><div class="nav-item"><a href="/blog/project/" class="nav-link">
  æ‚é¡¹
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å‰ç«¯" class="dropdown-title"><span class="title">å‰ç«¯</span> <span class="arrow down"></span></button> <button type="button" aria-label="å‰ç«¯" class="mobile-dropdown-title"><span class="title">å‰ç«¯</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          åŸºç¡€
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/H5/" class="nav-link">
  HTML + CSS
</a></li><li class="dropdown-subitem"><a href="/blog/JavaScript/" class="nav-link">
  JS
</a></li><li class="dropdown-subitem"><a href="/blog/extends/" class="nav-link">
  JSç»§æ‰¿
</a></li><li class="dropdown-subitem"><a href="/blog/tsc/" class="nav-link">
  TSç±»å‹ä½“æ“
</a></li></ul></li><li class="dropdown-item"><h4>
          Vue
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/Vue/Vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-subitem"><a href="/blog/Vue/Vue-slot/" class="nav-link">
  Vueæ’æ§½æµ…æ
</a></li><li class="dropdown-subitem"><a href="/blog/Vue/Vue-mixin/" class="nav-link">
  åœ¨Vueä¸­ä½¿ç”¨æ··å…¥mixin
</a></li><li class="dropdown-subitem"><a href="/blog/Vue/Vue-devtools/" class="nav-link">
  å¦‚ä½•åœ¨æ§åˆ¶å°ä¸­è°ƒç”¨Vueå¼€å‘è€…å·¥å…·
</a></li><li class="dropdown-subitem"><a href="/blog/Vue/Vue3/" class="nav-link">
  Vue3åŸºç¡€
</a></li><li class="dropdown-subitem"><a href="/blog/Vue/Vue-reactive/" class="nav-link">
  Vueå“åº”å¼åŸç†
</a></li><li class="dropdown-subitem"><a href="/blog/Vue/Vue-nextTick/" class="nav-link">
  nectTickçš„åŸç†
</a></li><li class="dropdown-subitem"><a href="/blog/Vue/Vue-component/" class="nav-link">
  Vue.componentä¸Vue.extend
</a></li><li class="dropdown-subitem"><a href="/blog/Vue/Vue-diff/" class="nav-link">
  diffç®—æ³•çš„ä¸æ–­ä¼˜åŒ–
</a></li></ul></li><li class="dropdown-item"><h4>
          React
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/React/React/" class="nav-link">
  React
</a></li><li class="dropdown-subitem"><a href="/blog/React/React-life/" class="nav-link">
  Reactç”Ÿå‘½å‘¨æœŸ
</a></li><li class="dropdown-subitem"><a href="/blog/React/mobx/" class="nav-link">
  mobx
</a></li></ul></li><li class="dropdown-item"><h4>
          å°ç¨‹åº
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/miniprogram/" class="nav-link">
  miniprogram
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å·¥ç¨‹åŒ–" class="dropdown-title"><span class="title">å·¥ç¨‹åŒ–</span> <span class="arrow down"></span></button> <button type="button" aria-label="å·¥ç¨‹åŒ–" class="mobile-dropdown-title"><span class="title">å·¥ç¨‹åŒ–</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Node.js
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/node/base/" class="nav-link">
  åŸºç¡€
</a></li></ul></li><li class="dropdown-item"><h4>
          webpack
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/webpack/base/" class="nav-link">
  webpackåŸºç¡€
</a></li><li class="dropdown-subitem"><a href="/blog/webpack/split/" class="nav-link">
  webpackåˆ†åŒ…
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/blog/network/" class="nav-link">
  ç½‘ç»œ
</a></div><div class="nav-item"><a href="/blog/algorithm/" class="nav-link">
  ç®—æ³•
</a></div><div class="nav-item"><a href="/blog/cs/" class="nav-link">
  CSè¯¾ç¨‹
</a></div><div class="nav-item"><a href="/blog/others/" class="nav-link">
  å…¶ä»–
</a></div><div class="nav-item"><a href="https://google.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  External
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/blog/introduction/" class="nav-link">
  intro
</a></div><div class="nav-item"><a href="/blog/project/" class="nav-link">
  æ‚é¡¹
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å‰ç«¯" class="dropdown-title"><span class="title">å‰ç«¯</span> <span class="arrow down"></span></button> <button type="button" aria-label="å‰ç«¯" class="mobile-dropdown-title"><span class="title">å‰ç«¯</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          åŸºç¡€
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/H5/" class="nav-link">
  HTML + CSS
</a></li><li class="dropdown-subitem"><a href="/blog/JavaScript/" class="nav-link">
  JS
</a></li><li class="dropdown-subitem"><a href="/blog/extends/" class="nav-link">
  JSç»§æ‰¿
</a></li><li class="dropdown-subitem"><a href="/blog/tsc/" class="nav-link">
  TSç±»å‹ä½“æ“
</a></li></ul></li><li class="dropdown-item"><h4>
          Vue
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/Vue/Vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-subitem"><a href="/blog/Vue/Vue-slot/" class="nav-link">
  Vueæ’æ§½æµ…æ
</a></li><li class="dropdown-subitem"><a href="/blog/Vue/Vue-mixin/" class="nav-link">
  åœ¨Vueä¸­ä½¿ç”¨æ··å…¥mixin
</a></li><li class="dropdown-subitem"><a href="/blog/Vue/Vue-devtools/" class="nav-link">
  å¦‚ä½•åœ¨æ§åˆ¶å°ä¸­è°ƒç”¨Vueå¼€å‘è€…å·¥å…·
</a></li><li class="dropdown-subitem"><a href="/blog/Vue/Vue3/" class="nav-link">
  Vue3åŸºç¡€
</a></li><li class="dropdown-subitem"><a href="/blog/Vue/Vue-reactive/" class="nav-link">
  Vueå“åº”å¼åŸç†
</a></li><li class="dropdown-subitem"><a href="/blog/Vue/Vue-nextTick/" class="nav-link">
  nectTickçš„åŸç†
</a></li><li class="dropdown-subitem"><a href="/blog/Vue/Vue-component/" class="nav-link">
  Vue.componentä¸Vue.extend
</a></li><li class="dropdown-subitem"><a href="/blog/Vue/Vue-diff/" class="nav-link">
  diffç®—æ³•çš„ä¸æ–­ä¼˜åŒ–
</a></li></ul></li><li class="dropdown-item"><h4>
          React
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/React/React/" class="nav-link">
  React
</a></li><li class="dropdown-subitem"><a href="/blog/React/React-life/" class="nav-link">
  Reactç”Ÿå‘½å‘¨æœŸ
</a></li><li class="dropdown-subitem"><a href="/blog/React/mobx/" class="nav-link">
  mobx
</a></li></ul></li><li class="dropdown-item"><h4>
          å°ç¨‹åº
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/miniprogram/" class="nav-link">
  miniprogram
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å·¥ç¨‹åŒ–" class="dropdown-title"><span class="title">å·¥ç¨‹åŒ–</span> <span class="arrow down"></span></button> <button type="button" aria-label="å·¥ç¨‹åŒ–" class="mobile-dropdown-title"><span class="title">å·¥ç¨‹åŒ–</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Node.js
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/node/base/" class="nav-link">
  åŸºç¡€
</a></li></ul></li><li class="dropdown-item"><h4>
          webpack
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/webpack/base/" class="nav-link">
  webpackåŸºç¡€
</a></li><li class="dropdown-subitem"><a href="/blog/webpack/split/" class="nav-link">
  webpackåˆ†åŒ…
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/blog/network/" class="nav-link">
  ç½‘ç»œ
</a></div><div class="nav-item"><a href="/blog/algorithm/" class="nav-link">
  ç®—æ³•
</a></div><div class="nav-item"><a href="/blog/cs/" class="nav-link">
  CSè¯¾ç¨‹
</a></div><div class="nav-item"><a href="/blog/others/" class="nav-link">
  å…¶ä»–
</a></div><div class="nav-item"><a href="https://google.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  External
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>æ‰‹å†™ JS æ•°ç»„åŸå‹æ–¹æ³•</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/JavaScript.html#æ‰‹å†™-js-æ•°ç»„åŸå‹æ–¹æ³•" class="sidebar-link">æ‰‹å†™ JS æ•°ç»„åŸå‹æ–¹æ³•</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/JavaScript.html#map" class="sidebar-link">map</a></li><li class="sidebar-sub-header"><a href="/blog/JavaScript.html#find" class="sidebar-link">find</a></li><li class="sidebar-sub-header"><a href="/blog/JavaScript.html#some" class="sidebar-link">some</a></li><li class="sidebar-sub-header"><a href="/blog/JavaScript.html#every" class="sidebar-link">every</a></li><li class="sidebar-sub-header"><a href="/blog/JavaScript.html#filter" class="sidebar-link">filter</a></li><li class="sidebar-sub-header"><a href="/blog/JavaScript.html#reduce-reduceright-ä»å³å¾€å·¦" class="sidebar-link">reduce/reduceRight(ä»å³å¾€å·¦)</a></li></ul></li><li><a href="/blog/JavaScript.html#promise" class="sidebar-link">Promise</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/JavaScript.html#æ„é€ å‡½æ•°æ–¹æ³•" class="sidebar-link">æ„é€ å‡½æ•°æ–¹æ³•</a></li><li class="sidebar-sub-header"><a href="/blog/JavaScript.html#promise-æ„é€ å‡½æ•°" class="sidebar-link">Promise æ„é€ å‡½æ•°</a></li></ul></li><li><a href="/blog/JavaScript.html#js-åŠ¨ç”»" class="sidebar-link">JS åŠ¨ç”»</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/JavaScript.html#å‡½æ•°" class="sidebar-link">å‡½æ•°</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/JavaScript.html#æ ˆå †é—®é¢˜" class="sidebar-link">æ ˆå †é—®é¢˜</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/JavaScript.html#typescript" class="sidebar-link">TypeScript</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/JavaScript.html#çº¯å‡½æ•°" class="sidebar-link">çº¯å‡½æ•°</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/JavaScript.html#v8-jit" class="sidebar-link">V8 JIT</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/JavaScript.html#ç¼–è¯‘å™¨å’Œè§£é‡Šå™¨" class="sidebar-link">ç¼–è¯‘å™¨å’Œè§£é‡Šå™¨</a></li><li class="sidebar-sub-header"><a href="/blog/JavaScript.html#jit" class="sidebar-link">JIT</a></li></ul></li><li><a href="/blog/JavaScript.html#serverless" class="sidebar-link">Serverless</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/JavaScript.html#symbol" class="sidebar-link">Symbol</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/JavaScript.html#json" class="sidebar-link">JSON</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/JavaScript.html#å®ç°ç§‘é‡ŒåŒ–" class="sidebar-link">å®ç°ç§‘é‡ŒåŒ–</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/JavaScript.html#éå†å±æ€§" class="sidebar-link">éå†å±æ€§</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/JavaScript.html#foreach-å’Œ-map-ä¸èƒ½é€šè¿‡-returnã€continueã€break-æå‰é€€å‡º" class="sidebar-link">forEach å’Œ map ä¸èƒ½é€šè¿‡ returnã€continueã€break æå‰é€€å‡º</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/JavaScript.html#sort" class="sidebar-link">sort</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/JavaScript.html#jsdoc" class="sidebar-link">JSDoc</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/JavaScript.html#å®šæ—¶å™¨" class="sidebar-link">å®šæ—¶å™¨</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/JavaScript.html#æ·±æ‹·è´" class="sidebar-link">æ·±æ‹·è´</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/JavaScript.html#æ˜¾å¼ç»‘å®š-callã€applyã€bind" class="sidebar-link">æ˜¾å¼ç»‘å®š callã€applyã€bind</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/JavaScript.html#new-æ“ä½œç¬¦" class="sidebar-link">new æ“ä½œç¬¦</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/JavaScript.html#åŒåŸŸè·¨é¡µé¢é€šä¿¡" class="sidebar-link">åŒåŸŸè·¨é¡µé¢é€šä¿¡</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/JavaScript.html#å¤„ç†æ‰€æœ‰-async-çš„é”™è¯¯" class="sidebar-link">å¤„ç†æ‰€æœ‰ async çš„é”™è¯¯</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/JavaScript.html#é•¿è¿æ¥-æŒä¹…è¿æ¥" class="sidebar-link">é•¿è¿æ¥(æŒä¹…è¿æ¥)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/JavaScript.html#å¯è¿­ä»£å±æ€§-è¿­ä»£å™¨å¯¹è±¡" class="sidebar-link">å¯è¿­ä»£å±æ€§(è¿­ä»£å™¨å¯¹è±¡)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/JavaScript.html#js-è„šæœ¬çš„å»¶è¿ŸåŠ è½½" class="sidebar-link">JS è„šæœ¬çš„å»¶è¿ŸåŠ è½½</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/JavaScript.html#window-å’Œ-document" class="sidebar-link">window å’Œ document</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/JavaScript.html#ç”Ÿæˆå™¨-generator" class="sidebar-link">ç”Ÿæˆå™¨ Generator</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/JavaScript.html#è£…é¥°å™¨-decorator" class="sidebar-link">è£…é¥°å™¨ Decorator</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/JavaScript.html#tips" class="sidebar-link">tips</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="æ‰‹å†™-js-æ•°ç»„åŸå‹æ–¹æ³•"><a href="#æ‰‹å†™-js-æ•°ç»„åŸå‹æ–¹æ³•" class="header-anchor">#</a> æ‰‹å†™ JS æ•°ç»„åŸå‹æ–¹æ³•</h2> <h3 id="map"><a href="#map" class="header-anchor">#</a> map</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">map</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> thisArg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> fn <span class="token operator">!==</span> <span class="token string">&quot;function&quot;</span> <span class="token operator">||</span> <span class="token operator">!</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;Ã—&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> newArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    newArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>thisArg<span class="token punctuation">,</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> newArr<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="find"><a href="#find" class="header-anchor">#</a> find</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">find</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> thisArg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> fn <span class="token operator">!==</span> <span class="token string">&quot;function&quot;</span> <span class="token operator">||</span> <span class="token operator">!</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;Ã—&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>thisArg<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="some"><a href="#some" class="header-anchor">#</a> some</h3> <p>å¦‚æœç”¨ä¸€ä¸ªç©ºæ•°ç»„è¿›è¡Œæµ‹è¯•ï¼Œåœ¨ä»»ä½•æƒ…å†µä¸‹å®ƒè¿”å›çš„éƒ½æ˜¯ falseã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">some</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> thisArg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> fn <span class="token operator">!==</span> <span class="token string">&quot;function&quot;</span> <span class="token operator">||</span> <span class="token operator">!</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;Ã—&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>thisArg<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="every"><a href="#every" class="header-anchor">#</a> every</h3> <p>è‹¥æ”¶åˆ°ä¸€ä¸ªç©ºæ•°ç»„ï¼Œæ­¤æ–¹æ³•åœ¨ä¸€åˆ‡æƒ…å†µä¸‹éƒ½ä¼šè¿”å› trueã€‚<br>
æ€è·¯åŒä¸Š</p> <h3 id="filter"><a href="#filter" class="header-anchor">#</a> filter</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">filter</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> thisArg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> fn <span class="token operator">!==</span> <span class="token string">&quot;function&quot;</span> <span class="token operator">||</span> <span class="token operator">!</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;Ã—&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> newArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>thisArg<span class="token punctuation">,</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span> newArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> newArr<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="reduce-reduceright-ä»å³å¾€å·¦"><a href="#reduce-reduceright-ä»å³å¾€å·¦" class="header-anchor">#</a> reduce/reduceRight(ä»å³å¾€å·¦)</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">reduce</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> start</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> fn <span class="token operator">!==</span> <span class="token string">&quot;function&quot;</span> <span class="token operator">||</span> <span class="token operator">!</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> start <span class="token operator">?</span> start <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//æ²¡æœ‰åˆå§‹å€¼çš„æ—¶å€™ç¼©çŸ­éå†æ¬¡æ•°</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    result <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">(</span>result<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>ä» MDN çš„è¡¨æ ¼å¯ä»¥çœ‹å‡º<br>
reduce æ˜¯è¿™æ ·çš„,å¦‚æœç¬¬äºŒä¸ªå‚æ•°ä¹Ÿå°±æ˜¯åˆå§‹å€¼å¦‚æœä¸ç»™çš„è¯,é‚£ä¹ˆéå†çš„æ¬¡æ•°å°±æ˜¯æ•°ç»„çš„é•¿åº¦-1<br>
è€Œä¸”ç¬¬ä¸€éå†æ˜¯ä»ç¬¬äºŒé¡¹å¼€å§‹,ä¹Ÿå°±æ˜¯ç´¢å¼• 1 å¼€å§‹ é»˜è®¤ç´¢å¼• 0 çš„å›è°ƒç»“æœå°±æ˜¯ ç´¢å¼• 0 çš„å€¼<br>
å¦‚æœç»™äº† redece çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯æ•°ç»„çš„é•¿åº¦,å¹¶ä¸” cb çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸€å¼€å§‹å°±æ˜¯ reduce çš„ç¬¬äºŒä¸ªå‚æ•°</p> <h2 id="promise"><a href="#promise" class="header-anchor">#</a> Promise</h2> <h3 id="æ„é€ å‡½æ•°æ–¹æ³•"><a href="#æ„é€ å‡½æ•°æ–¹æ³•" class="header-anchor">#</a> æ„é€ å‡½æ•°æ–¹æ³•</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 1ã€Promise.resolve</span>
Promise<span class="token punctuation">.</span><span class="token function-variable function">resolve</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>val <span class="token keyword">instanceof</span> <span class="token class-name">Promise</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      val<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
        <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token function">resolve</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 2ã€Promise.reject</span>
Promise<span class="token punctuation">.</span><span class="token function-variable function">reject</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">reject</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 3ã€Promise.all</span>
Promise<span class="token punctuation">.</span><span class="token function-variable function">all</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">iterable</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> iterable<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;not iterator&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>iterable<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> iterable<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>iterable<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
        <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          count<span class="token operator">++</span><span class="token punctuation">;</span>
          arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> res<span class="token punctuation">;</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">===</span> iterable<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token function">resolve</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 4ã€Promise.race</span>
Promise<span class="token punctuation">.</span><span class="token function-variable function">race</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">iterable</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> iterable<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> iterable<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>iterable<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 5ã€Promise.allSettled</span>
Promise<span class="token punctuation">.</span><span class="token function-variable function">allSettled</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">iterable</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> iterable<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// ç»“æœæ•°ç»„</span>
    <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token comment">// forEachçš„è¯ åˆ™å¯¹ç±»æ•°ç»„ä¸å¯ä»¥ç”¨  æ”¹ä¸ºforæ¯”è¾ƒå¥½  ä½†å¯¹set mapåˆä¸å¯ä»¥ç”¨</span>
    iterable<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// Promise.resolveå¯ä»¥æ¥å—æˆåŠŸçš„æˆ–è€…å¤±è´¥çš„promiseå¹¶è¿”å›æˆåŠŸæˆ–å¤±è´¥ ï¼ï¼</span>
      Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
        <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          count<span class="token operator">++</span><span class="token punctuation">;</span>
          res<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
            status<span class="token operator">:</span> <span class="token string">&quot;fulfilled&quot;</span><span class="token punctuation">,</span>
            value<span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">;</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">===</span> iterable<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span><span class="token parameter">reason</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          count<span class="token operator">++</span><span class="token punctuation">;</span>
          res<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
            status<span class="token operator">:</span> <span class="token string">&quot;rejected&quot;</span><span class="token punctuation">,</span>
            reason<span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">;</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">===</span> iterable<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="promise-æ„é€ å‡½æ•°"><a href="#promise-æ„é€ å‡½æ•°" class="header-anchor">#</a> Promise æ„é€ å‡½æ•°</h3> <h2 id="js-åŠ¨ç”»"><a href="#js-åŠ¨ç”»" class="header-anchor">#</a> JS åŠ¨ç”»</h2> <p>æ—©æœŸç”¨å®šæ—¶å™¨å®ç°ï¼Œæ›´å¥½çš„åŠæ³•æ˜¯ä½¿ç”¨ requesttAnimationFrame(cb)ï¼Œæ˜¯ H5 çš„ APIã€‚<br>
ä¸»è¦æ€æƒ³ï¼šè®©æ‰§è¡Œ cb çš„é¢‘ç‡å’Œå±å¹•åˆ·æ–°ç‡ä¿æŒä¸€è‡´ï¼Œè€Œä¸æ˜¯é€šè¿‡å®šæ—¶å™¨çš„æ—¶é—´è¿›è¡Œæ§åˆ¶ï¼Œè¿™æ ·ä¸ä¼šä¸¢å¸§ã€‚<br>
æ­¤å¤–ï¼Œå¯ä»¥åˆ©ç”¨æ­¤ API çš„ç‰¹æ€§è¿›è¡Œ<strong>èŠ‚æµ</strong>ã€‚</p> <h2 id="å‡½æ•°"><a href="#å‡½æ•°" class="header-anchor">#</a> å‡½æ•°</h2> <p>1ã€æ™®é€šå‡½æ•°æ‰§è¡Œæ—¶å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ<br>
â‘  å½¢æˆä¸€ä¸ªå…¨æ–°çš„ç§æœ‰ä¸Šä¸‹æ–‡ ECï¼Œæœ‰ä¸€ä¸ªç§æœ‰å˜é‡å¯¹è±¡ AO(?)<br>
â‘¡ åˆå§‹ä½œç”¨åŸŸé“¾ã€åˆå§‹ thisã€åˆå§‹ argumentsã€å½¢å‚èµ‹å€¼ã€å˜é‡æå‡ã€‚<br>
â‘¢ ä»£ç æ‰§è¡Œã€‚<br>
â‘£ å‡ºæ ˆé‡Šæ”¾å’Œä¸é‡Šæ”¾(é—­åŒ…)ã€‚</p> <p>2ã€ç®­å¤´å‡½æ•°æ‰§è¡Œï¼š<br>
â‘  å½¢æˆä¸€ä¸ªå…¨æ–°çš„ç§æœ‰ä¸Šä¸‹æ–‡ ECï¼Œæœ‰ä¸€ä¸ªç§æœ‰å˜é‡å¯¹è±¡ AO<br>
â‘¡ åˆå§‹ä½œç”¨åŸŸé“¾ã€å½¢å‚èµ‹å€¼ã€å˜é‡æå‡ã€‚<br>
â‘¢ ä»£ç æ‰§è¡Œã€‚<br>
â‘£ å‡ºæ ˆé‡Šæ”¾å’Œä¸é‡Šæ”¾(é—­åŒ…)ã€‚<br>
åŒºåˆ«ï¼šå†™æ³•ã€thisã€argumentsã€æ²¡æœ‰ prototype(ä¸å…è®¸è¢« new)<br>
ç®­å¤´å‡½æ•°çš„ this æŒ‡å‘æ‰€åœ¨ä¸Šä¸‹æ–‡çš„ thisï¼Œæˆ–è€…è¯´çˆ¶çº§çš„ this</p> <p>3ã€ç±»æ•°ç»„(å¦‚ arguments)å˜æˆæ•°ç»„ï¼š<br>
â‘ ã€æ‰©å±•è¿ç®—ç¬¦<br>
â‘¡ã€Array.from(arguments)<br>
â‘¢ã€Array.prototype.slice.call(arguments)<br>
å…¶å®è¿™æ ·ä¹Ÿè¡Œ: [].slice.call(arguments)<br>
åŸå› ä» slice æºç å¯ä»¥çœ‹å‡ºï¼Œåˆ©ç”¨äº† arguments å¯ä»¥ç´¢å¼•ã€‚<br>
ç±»æ•°ç»„ï¼ˆarray-likeï¼‰æœ‰: Strings å­—ç¬¦ä¸²å¯¹è±¡ã€Nodelistã€arguments(æ‰€æœ‰å®å‚ï¼Œæœ‰ callee å±æ€§æŒ‡å‘è¯¥å‡½æ•°)ã€typedArray(webgl ä½¿ç”¨ï¼Œä¸€ä¸ª TypedArray å¯¹è±¡æè¿°äº†åº•å±‚äºŒè¿›åˆ¶æ•°æ®ç¼“å†²åŒºçš„ç±»æ•°ç»„è§†å›¾)<br>
arguments å¯¹åº”æ‰€æœ‰å®å‚ï¼Œargs æ˜¯æ²¡æœ‰å½¢å‚å¯¹åº”çš„å®å‚ï¼Œfn.length æ˜¯å½¢å‚ä¸ªæ•°</p> <div class="language-js extra-class"><pre class="language-js"><code>Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">slice</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span> begin<span class="token punctuation">,</span> end</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>begin <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    begin <span class="token operator">=</span> arr<span class="token punctuation">.</span>length <span class="token operator">+</span> begin<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>begin <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    begin <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>begin <span class="token operator">&gt;=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>end <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    end <span class="token operator">=</span> arr<span class="token punctuation">.</span>length <span class="token operator">+</span> end<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>end <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">||</span> end <span class="token operator">&gt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    end <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> newArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> begin<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> end<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    newArr<span class="token punctuation">[</span>i <span class="token operator">-</span> begin<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> newArr<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">assertEqual</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">arr1<span class="token punctuation">,</span> arr2</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> arr1<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> arr2<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>å…¶å®ç±»æ•°ç»„å°±æ˜¯é¸­å­ç±»å‹ï¼Œæ—¢ç„¶æ•°ç»„å¯ä»¥ï¼Œé‚£ä¹ˆè®©ç±»æ•°ç»„ä¹Ÿå¯ä»¥ï¼Œä¹Ÿå°±æ˜¯å€Ÿç”¨ã€‚æ¯”å¦‚[].forEach.call(argumets,...)</p> <p>4ã€å„ç§å¾ªç¯(forã€whileã€forEachã€for ofã€for in)<br>
æ€§èƒ½ç”±å¿«åˆ°æ…¢(v8)ï¼šfor â‰ˆ while &gt; forEach â‰ˆ for of &gt; for in(è¦éå†åŸå‹é“¾)</p> <p>5ã€å—çº§ä½œç”¨åŸŸç»ƒä¹ é¢˜<br> <s>å—çº§ä¸Šä¸‹æ–‡äº§ç”Ÿçš„åŸå› ï¼šåœ¨é™¤äº†å‡½æ•°å’Œå¯¹è±¡çš„å¤§æ‹¬å·ä¸­ï¼Œå‡ºç° letã€constã€function åˆ™ä¼šäº§ç”Ÿå—çº§ä¸Šä¸‹æ–‡ã€‚</s></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  foo <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//è¾“å‡ºfooå‡½æ•°ä½“</span>
<span class="token comment">// å‡½æ•°å…·æœ‰ç‰¹æ®Šæ€§ï¼Œå…¨å±€ä¸­ä¼šè¿›è¡Œfooçš„å£°æ˜æ‰€ä»¥ä¸æŠ¥é”™ï¼Œ</span>
<span class="token comment">// è€Œåœ¨å—çº§ä½œç”¨åŸŸå†…ï¼Œè¿›è¡Œäº†fooçš„å£°æ˜å’Œå®šä¹‰ã€‚ä»è€Œæ”¹å˜äº†å…¨å±€çš„fooã€‚å¦‚æœåœ¨å‰é¢logï¼Œåˆ™ä¼šundefinedã€‚</span>
</code></pre></div><p>6ã€é—­åŒ…(è¾ƒè§„èŒƒçš„å®šä¹‰)<br>
åœ¨ JavaScript ä¸­ï¼Œæ ¹æ®è¯æ³•ä½œâ½¤åŸŸçš„è§„åˆ™ï¼Œå†…éƒ¨å‡½æ•°æ€»æ˜¯å¯ä»¥è®¿é—®å…¶å¤–éƒ¨å‡½æ•°ä¸­å£°æ˜çš„å˜é‡ï¼Œå½“é€šè¿‡è°ƒâ½¤ä¸€ä¸ªå¤–éƒ¨å‡½æ•°è¿”å›â¼€ä¸ªå†…éƒ¨å‡½æ•°åï¼Œå³ä½¿è¯¥å¤–éƒ¨å‡½æ•°å·²ç»æ‰§â¾ç»“æŸäº†ï¼Œä½†æ˜¯å†…éƒ¨å‡½æ•°å¼•â½¤å¤–éƒ¨å‡½æ•°çš„å˜é‡ä¾ç„¶ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œæˆ‘ä»¬å°±æŠŠè¿™äº›å˜é‡çš„é›†åˆç§°ä¸ºé—­åŒ…ã€‚â½å¦‚å¤–éƒ¨å‡½æ•°æ˜¯ fooï¼Œé‚£ä¹ˆè¿™äº›å˜é‡çš„é›†åˆå°±ç§°ä¸º foo å‡½æ•°çš„é—­åŒ…ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> n <span class="token operator">=</span> <span class="token number">999</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> n<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> f2<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">result</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 999</span>
</code></pre></div><h2 id="æ ˆå †é—®é¢˜"><a href="#æ ˆå †é—®é¢˜" class="header-anchor">#</a> æ ˆå †é—®é¢˜</h2> <p>æœ¬è´¨æ˜¯æ—¶é—´å’Œç©ºé—´çš„äº¤æ¢é—®é¢˜</p> <ul><li>å¼•ç”¨æ•°æ®ç±»å‹å æ®ç©ºé—´å¤§ã€å¤§å°ä¸å›ºå®šï¼Œå¦‚æœå­˜å‚¨åœ¨æ ˆä¸­ï¼Œå°†å½±å“ç¨‹åºçš„è¿è¡Œæ€§èƒ½ã€‚</li></ul> <h2 id="typescript"><a href="#typescript" class="header-anchor">#</a> TypeScript</h2> <p>1ã€TS æ˜¯ä»¥ JS ä¸ºåŸºç¡€æ„å»ºçš„è¯­è¨€ï¼Œæ˜¯ JS çš„è¶…é›†(ç›¸å½“äº JS pro)ï¼Œæ‰©å±•äº† JS å¹¶æ·»åŠ äº†ç±»å‹ï¼Œå¯ä»¥åœ¨ä»»ä½•æ”¯æŒ JS çš„å¹³å°ä¸­æ‰§è¡Œã€‚ä½† TS ä¸èƒ½è¢« JS è§£æå™¨ç›´æ¥æ‰§è¡Œï¼Œéœ€è¦ç¼–è¯‘ä¸º JS(åˆ©ç”¨ tsc)ã€‚<br>
2ã€why studying?<br>
JS æ˜¯åŠ¨æ€è¯­è¨€(ä¸å£°æ˜å˜é‡ç±»å‹)ï¼Œè™½ç„¶çµæ´»ï¼Œä½†ä¸å®¹æ˜“æ‰¾é”™è¯¯çš„ä»£ç ä½ç½®ã€‚<br>
3ã€ç‰¹ç‚¹<br>
â‘  ç±»å‹å£°æ˜ï¼šå˜é‡ã€å‡½æ•°å‚æ•°ã€è¿”å›å€¼<br>
4ã€unknown ä¸ anyï¼šany èŒƒå›´æ›´å¹¿ï¼Œå’Œä¸å†™æ˜¯ä¸€æ ·çš„ï¼Œä¹Ÿå¯ä»¥èµ‹ç»™å…¶ä»–ä»»æ„çš„å€¼ï¼Œunknown ä¸å¯ä»¥ã€‚<br>
5ã€interface æ¥å£: å®šä¹‰å¯¹è±¡ã€å‡½æ•°çš„ç»“æ„ã€‚ç±»ä¼¼çš„è¿˜æœ‰ typeã€‚<a href="https://github.com/SunshowerC/blog/issues/7" target="_blank" rel="noopener noreferrer">åŒºåˆ«<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br>
6ã€enum æšä¸¾ï¼šæ¯”å¦‚å¸¸æ•°æšä¸¾ï¼Œå­˜å‚¨ä¸€ç»„å¸¸é‡ã€‚</p> <h2 id="çº¯å‡½æ•°"><a href="#çº¯å‡½æ•°" class="header-anchor">#</a> çº¯å‡½æ•°</h2> <p>ä¸€ç±»ç‰¹åˆ«çš„å‡½æ•°: åªè¦æ˜¯åŒæ ·çš„è¾“å…¥(å®å‚)ï¼Œå¿…å®šå¾—åˆ°åŒæ ·çš„è¾“å‡º(è¿”å›)<br>
å¿…é¡»éµå®ˆä»¥ä¸‹ä¸€äº›çº¦æŸï¼š<br>
1)ä¸å¾—æ”¹å†™å‚æ•°æ•°æ®<br>
2)ä¸ä¼šäº§ç”Ÿä»»ä½•å‰¯ä½œç”¨ï¼Œä¾‹å¦‚ç½‘ç»œè¯·æ±‚ï¼Œè¾“å…¥å’Œè¾“å‡ºè®¾å¤‡<br>
3)ä¸èƒ½è°ƒç”¨ Date.now()æˆ–è€… Math.random()ç­‰ä¸çº¯çš„æ–¹æ³•<br>
è¡¥å……ï¼šredux çš„ reducer å‡½æ•°å¿…é¡»æ˜¯ä¸€ä¸ªçº¯å‡½æ•°</p> <h2 id="v8-jit"><a href="#v8-jit" class="header-anchor">#</a> V8 JIT</h2> <h3 id="ç¼–è¯‘å™¨å’Œè§£é‡Šå™¨"><a href="#ç¼–è¯‘å™¨å’Œè§£é‡Šå™¨" class="header-anchor">#</a> ç¼–è¯‘å™¨å’Œè§£é‡Šå™¨</h3> <ul><li>ç¼–è¯‘å‹è¯­è¨€åœ¨ç¨‹åºæ‰§è¡Œå‰ï¼Œéœ€è¦ç»è¿‡ç¼–è¯‘å™¨çš„ç¼–è¯‘è¿‡ç¨‹ï¼Œå¹¶ä¸”åœ¨ç¼–è¯‘ä¹‹åä¼šä¿ç•™æœºå™¨èƒ½è¯»æ‡‚çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä¹‹åæ¯æ¬¡è¿è¡Œç¨‹åºæ—¶ç›´æ¥è¿è¡ŒäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä¸éœ€è¦é‡æ–°ç¼–è¯‘ï¼Œæ¯”å¦‚ C++ã€go ç­‰</li> <li>è§£é‡Šæ€§è¯­è¨€åœ¨æ¯æ¬¡è¿è¡Œæ—¶éƒ½éœ€è¦è§£é‡Šå™¨å¯¹ç¨‹åºè¿›è¡ŒåŠ¨æ€è§£é‡Šå’Œæ‰§è¡Œ(è¾¹è§£é‡Šè¾¹æ‰§è¡Œ)ï¼Œæ¯”å¦‚ pythonã€js ç­‰</li> <li>V8 æ‰§è¡Œ JS ä»£ç çš„è¿‡ç¨‹:</li></ul> <ol><li>å°†æºä»£ç ç»è¿‡è¯æ³•åˆ†æå’Œè¯­æ³•åˆ†æç”ŸæˆæŠ½è±¡è¯­æ³•æ ‘ AST å’Œæ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå…¶ä¸­è¯æ³•åˆ†ææŒ‡çš„æ˜¯å°†æºç æ‹†åˆ†æˆä¸€ä¸ªä¸ª tokenï¼Œè¯­æ³•åˆ†æå°±æ˜¯è§£ææˆ AST</li> <li>è§£é‡Šå™¨æ ¹æ® AST ç”Ÿæˆå­—èŠ‚ç ï¼Œå¹¶ä¸”é€è¡Œè§£é‡Šæ‰§è¡Œå­—èŠ‚ç (ç”Ÿæˆæœºå™¨ç )ã€‚æœ€å¼€å§‹æ˜¯æ²¡æœ‰å­—èŠ‚ç è¿™ä¸ªè¿‡ç¨‹ï¼Œä½†ç”±äºç›´æ¥ç”Ÿæˆæœºå™¨ç å ç”¨çš„å†…å­˜å¤ªå¤§ï¼Œå› æ­¤å¼•å…¥äº†å­—èŠ‚ç </li></ol> <h3 id="jit"><a href="#jit" class="header-anchor">#</a> JIT</h3> <ul><li><p>è§£é‡Šå™¨åœ¨æ‰§è¡Œå­—èŠ‚ç çš„è¿‡ç¨‹ä¸­å¦‚æœå‘ç°çƒ­ç‚¹ä»£ç (å¤šæ¬¡æ‰§è¡Œçš„ä»£ç )ï¼Œé‚£ä¹ˆ V8 ä¸­çš„ç¼–è¯‘å™¨å°±ä¼š<strong>ç›´æ¥</strong>å°†å­—èŠ‚ç è½¬åŒ–ä¸ºæœºå™¨ç å¹¶<strong>ä¿å­˜èµ·æ¥</strong>ï¼Œåç»­çš„ä»£ç æ‰§è¡Œè¿‡ç¨‹ä¸­ç›´æ¥æ‰§è¡Œæœºå™¨ç å°±è¡Œï¼Œæ›´åŠ é«˜æ•ˆï¼Œçœå»äº†å­—èŠ‚ç <strong>é€è¡Œç¿»è¯‘</strong>ä¸ºæœºå™¨ç è¿™ä¸€è¿‡ç¨‹ã€‚ç›¸å½“äº V8 å­—èŠ‚ç ç»“åˆäº†è§£é‡Šå™¨å’Œç¼–è¯‘å™¨ã€‚</p></li> <li><p>è¿ç”¨ JIT æŠ€æœ¯ä¹‹åï¼ŒJS çš„è¿è¡Œé€Ÿåº¦å·²ç»å˜å¾—å¾ˆå¿«ï¼Œè€Œ WebAssembly å¯ä»¥ä½¿å…¶æ›´å¿«ã€‚æœ¬èº«.wasm æ ¼å¼æ–‡ä»¶å°±æ˜¯äºŒè¿›åˆ¶å­—èŠ‚ç ï¼Œä¸ç”¨åƒ JS ä¸€æ ·ä» AST è½¬æ¢ä¸ºå­—èŠ‚ç ï¼Œæ‰€ä»¥è¿è¡Œæ›´å¿«ï¼Œå¹¶ä¸”ä½“ç§¯å°ï¼Œå¯ç§»æ¤èƒ½åŠ›å¼º(å¤šç§è¯­è¨€éƒ½å¯ä»¥ç¼–è¯‘æˆ wasm æ–‡ä»¶)</p></li></ul> <h2 id="serverless"><a href="#serverless" class="header-anchor">#</a> Serverless</h2> <h2 id="symbol"><a href="#symbol" class="header-anchor">#</a> Symbol</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 1ã€symbolæ˜¯ç®€å•ç±»å‹ï¼Œå¹¶ä¸”ä¸èƒ½new</span>
<span class="token comment">// 2ã€é€šè¿‡symbol(key)åˆ›å»ºä¸¤ä¸ªsymbolä¸ç›¸ç­‰</span>
<span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
<span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
<span class="token comment">// 3ã€è§£å†³é—®é¢˜2ï¼Œå¹¶ä¸”å¯åˆ›å»ºå…¨å±€çš„symbol</span>
Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">==</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">===</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token comment">// 4ã€æ ¹æ®å…¨å±€æ³¨å†Œsymbolè¡¨é‡Œçš„symbolæ‰¾åˆ°åŸå§‹å€¼</span>
<span class="token keyword">const</span> a <span class="token operator">=</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Symbol<span class="token punctuation">.</span><span class="token function">keyFor</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç±»å‹å¼ºåˆ¶è½¬æ¢è¿”å›stringç±»å‹ '1'ï¼Œ å¦‚æœä¸Šé¢æ˜¯[]åˆ™è¿”å›''</span>
</code></pre></div><h2 id="json"><a href="#json" class="header-anchor">#</a> JSON</h2> <p>ä¸»è¦æ¢è®¨ JSON.stringifyã€‚<a href="https://juejin.cn/post/6844904016212672519#heading-26" target="_blank" rel="noopener noreferrer">è¯¦ç»†<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br>
1ã€å¯¹äº<strong>undefined</strong>ã€<strong>ä»»æ„çš„å‡½æ•°</strong>ä»¥åŠ<strong>Symbol</strong>ä¸‰ä¸ªç‰¹æ®Šçš„å€¼åˆ†åˆ«ä½œä¸º<strong>å¯¹è±¡å±æ€§çš„å€¼</strong>ã€<strong>æ•°ç»„å…ƒç´ </strong>ã€<strong>å•ç‹¬çš„å€¼</strong>æ—¶çš„ä¸åŒè¿”å›ç»“æœã€‚<br>
â‘ undefinedã€ä»»æ„çš„å‡½æ•°ä»¥åŠ Symbol ä½œä¸ºå¯¹è±¡å±æ€§å€¼æ—¶ï¼ŒJSON.stringify() è·³è¿‡(å¿½ç•¥)å¯¹å®ƒä»¬è¿›è¡Œåºåˆ—åŒ–(ä¸è¾“å‡º)<br>
â‘¡undefinedã€ä»»æ„çš„å‡½æ•°ä»¥åŠ Symbol ä½œä¸ºæ•°ç»„å…ƒç´ å€¼æ—¶ï¼ŒJSON.stringify() å°†ä¼šå°†å®ƒä»¬åºåˆ—åŒ–ä¸º null<br>
â‘¢undefinedã€ä»»æ„çš„å‡½æ•°ä»¥åŠ Symbol è¢« JSON.stringify() ä½œä¸ºå•ç‹¬çš„å€¼è¿›è¡Œåºåˆ—åŒ–æ—¶éƒ½ä¼šè¿”å› undefined<br>
â‘£ å¸ƒå°”å€¼ã€æ•°å­—ã€å­—ç¬¦ä¸²çš„åŒ…è£…å¯¹è±¡åœ¨åºåˆ—åŒ–è¿‡ç¨‹ä¸­ä¼šè‡ªåŠ¨è½¬æ¢æˆå¯¹åº”çš„åŸå§‹å€¼ã€‚<br>
â‘¤new Date().toJSON()ï¼š&quot;2021-08-09T14:25:17.008Z&quot;ï¼Œå’Œ toString()ç¨å¾®ä¸ä¸€æ ·ã€‚<br>
â‘¥NaN å’Œ Infinity æ ¼å¼çš„æ•°å€¼åŠ null éƒ½ä¼šè¢«å½“åš null</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token number">NaN</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ('{&quot;a&quot;:null}');</span>
<span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">NaN</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ('[null]');</span>
<span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ('null');</span>
</code></pre></div><h2 id="å®ç°ç§‘é‡ŒåŒ–"><a href="#å®ç°ç§‘é‡ŒåŒ–" class="header-anchor">#</a> å®ç°ç§‘é‡ŒåŒ–</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">myCurry</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">curry</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>fn<span class="token punctuation">.</span>length <span class="token operator">&lt;=</span> args1<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// fn.lengthæ˜¯å½¢å‚ä¸ªæ•°</span>
      <span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>args1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args2</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">curry</span><span class="token punctuation">(</span><span class="token operator">...</span>args1<span class="token punctuation">,</span> <span class="token operator">...</span>args2<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="éå†å±æ€§"><a href="#éå†å±æ€§" class="header-anchor">#</a> éå†å±æ€§</h2> <ol><li>for in è‡ªèº«å’ŒåŸå‹é“¾ å¯æšä¸¾, ä¸åŒ…æ‹¬ symbol</li> <li>Object.keys() è‡ªèº« å¯æšä¸¾, ä¸åŒ…æ‹¬ symbol</li> <li>Object.getOwnPropertyNames() è‡ªèº«å¯æšä¸¾+ä¸å¯æšä¸¾ ä¸åŒ…æ‹¬ symbol</li> <li>obj.prototype.hasOwnProperty() åˆ¤æ–­å±æ€§ï¼šè‡ªèº«å¯æšä¸¾+ä¸å¯æšä¸¾ åŒ…æ‹¬ symbol</li> <li>Reflect.ownKeys æ–¹æ³•è¿”å›ä¸€ä¸ªç”±ç›®æ ‡å¯¹è±¡<strong>è‡ªèº«</strong>çš„å±æ€§é”®ç»„æˆçš„æ•°ç»„ã€‚å®ƒçš„è¿”å›å€¼ç­‰åŒäº Object.getOwnPropertyNames(target).concat(Object.getOwnPropertySymbols(target))ã€‚</li> <li>obj.propertyIsEnumerable(key)åˆ¤æ–­æ˜¯å¦å¯æšä¸¾ï¼Œæ¯”å¦‚æ•°ç»„çš„ length æ˜¯ä¸å¯æšä¸¾</li></ol> <h2 id="foreach-å’Œ-map-ä¸èƒ½é€šè¿‡-returnã€continueã€break-æå‰é€€å‡º"><a href="#foreach-å’Œ-map-ä¸èƒ½é€šè¿‡-returnã€continueã€break-æå‰é€€å‡º" class="header-anchor">#</a> forEach å’Œ map ä¸èƒ½é€šè¿‡ returnã€continueã€break æå‰é€€å‡º</h2> <p>å¯ä»¥é€šè¿‡ some å’Œ every</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// continue:</span>
arr<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>item <span class="token operator">===</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// æˆ– åªç”¨return</span>
arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>item <span class="token operator">===</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// break:</span>
arr<span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> item <span class="token operator">!==</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="sort"><a href="#sort" class="header-anchor">#</a> sort</h2> <p>1ã€Chrome70 ä¹‹å‰ï¼Œé•¿åº¦ 10 ä»¥ä¸‹ï¼Œæ˜¯æ’å…¥æ’åºï¼Œ10 ä»¥ä¸Šæ˜¯å¿«æ’ã€‚<br>
2ã€Chrome70 ä¹‹åï¼Œæ˜¯å½’å¹¶æ’åºç»“åˆäº†æ’å…¥æ’åºã€‚<br>
æ‹“å±•ï¼š<a href="https://leetcode-cn.com/problems/monotonic-array/" target="_blank" rel="noopener noreferrer">åˆ¤æ–­å•è°ƒæ•°ç»„<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>,å®˜è§£æ³•ä¸€ç”¨äº† everyï¼Œå¯ä»¥å€Ÿé‰´ã€‚<br>
çŒ¿è¾…å¯¼ä¸‰é¢ï¼šä¸ä»…åˆ¤æ–­å•è°ƒï¼Œè¿˜è¦åˆ†è¾¨å‡é™ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">judge</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> rise <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> dec <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;=</span> arr<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      rise <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> arr<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      dec <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>rise <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>dec<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>rise <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>dec<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="jsdoc"><a href="#jsdoc" class="header-anchor">#</a> JSDoc</h2> <p>è¡¥å……å¸¸ç”¨è¯­æ³•</p> <h2 id="å®šæ—¶å™¨"><a href="#å®šæ—¶å™¨" class="header-anchor">#</a> å®šæ—¶å™¨</h2> <ol><li>setTimeout(fn, 0)è®¾è®¡ä¸º 4ms çš„åŸå› ï¼šsetTimeout 4ms æ˜¯å†å²è®¾è®¡é—®é¢˜ï¼Œå½“å¹´è®¾è®¡æˆ 0ms æˆ– 1ms çš„æ—¶å€™ï¼Œå¯¼è‡´è€—ç”µé‡å¢å¤§å’Œæµè§ˆå™¨å´©æºƒç­‰é—®é¢˜ï¼Œåæ¥æ§åˆ¶åœ¨ 4msã€‚</li></ol> <ul><li>éœ€è¦åŒæ—¶æ»¡è¶³åµŒå¥—å±‚çº§è¶…è¿‡ 5 å±‚ï¼Œtimeout å°äº 4msï¼Œæ‰ä¼šè®¾ç½® 4ms</li> <li>ä¸åŒæµè§ˆå™¨çš„è®¾è®¡ä¸åŒ</li> <li>&quot;å…¶åŸå› åœ¨äºå¦‚æœæµè§ˆå™¨å…è®¸ 0msï¼Œä¼šå¯¼è‡´ JavaScript å¼•æ“è¿‡åº¦å¾ªç¯ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœæµè§ˆå™¨æ¶æ„æ˜¯å•è¿›ç¨‹çš„ï¼Œé‚£ä¹ˆå¯èƒ½ç½‘ç«™å¾ˆå®¹æ˜“æ— å“åº”ã€‚å› ä¸ºæµè§ˆå™¨æœ¬èº«ä¹Ÿæ˜¯å»ºç«‹åœ¨ event loop ä¹‹ä¸Šçš„ï¼Œå¦‚æœé€Ÿåº¦å¾ˆæ…¢çš„ JavaScript engine é€šè¿‡ 0ms timer ä¸æ–­å®‰æ’å”¤é†’ç³»ç»Ÿï¼Œé‚£ä¹ˆ event loop å°±ä¼šè¢«é˜»å¡ã€‚é‚£ä¹ˆæ­¤æ—¶ç”¨æˆ·ä¼šé¢å¯¹ä»€ä¹ˆæƒ…å†µå‘¢ï¼ŸåŒæ—¶é‡åˆ° CPU spinning å’ŒåŸºæœ¬æŒ‚èµ·çš„æµè§ˆå™¨ï¼Œæƒ³æƒ³å°±è®©äººå´©æºƒã€‚&quot;</li></ul> <ol start="2"><li>setInterval çš„é—®é¢˜ï¼Œä¹Ÿæ˜¯æ—¶é—´çš„è¯¯å·®ï¼Œäº‹ä»¶å¾ªç¯çš„é—®é¢˜ï¼šå¦‚æœä½ çš„ä»£ç é€»è¾‘æ‰§è¡Œæ—¶é—´å¯èƒ½æ¯”å®šæ—¶å™¨æ—¶é—´é—´éš”è¦é•¿(å¯¼è‡´å®šæ—¶å™¨ä»£ç è¿ç»­æ‰§è¡Œï¼Œæ²¡æœ‰è¾¾åˆ°å®šæ—¶å™¨æ•ˆæœ)ï¼Œå»ºè®®ä½ ä½¿ç”¨é€’å½’è°ƒç”¨äº† setTimeout() çš„å…·åå‡½æ•°ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ setInterval() ä»¥ 5 ç§’çš„é—´éš”è½®è¯¢æœåŠ¡å™¨ï¼Œå¯èƒ½å› ç½‘ç»œå»¶è¿Ÿã€æœåŠ¡å™¨æ— å“åº”ä»¥åŠè®¸å¤šå…¶å®ƒçš„é—®é¢˜è€Œå¯¼è‡´è¯·æ±‚æ— æ³•åœ¨åˆ†é…çš„æ—¶é—´å†…å®Œæˆã€‚ä½† setTimeout ä¹Ÿæœ‰è¯¯å·®ï¼Œæ‰€ä»¥ä¹Ÿè¦è§£å†³</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Your logic here</span>

    <span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="3"><li>requestAnimationFrameï¼šå›è°ƒå‡½æ•°ä¼šåœ¨æµè§ˆå™¨é‡ç»˜ä¹‹å‰è°ƒç”¨ï¼Œåˆ©ç”¨äº†æµè§ˆå™¨åˆ·æ–°ç‡å³é‡ç»˜é¢‘ç‡è¿™ä¸€ç‰¹æ€§è¿›è¡ŒåŠ¨ç”»çš„ç»˜åˆ¶ï¼Œæ¯” setInterval æ›´å¥½(setInterval æˆ– Timeout éœ€è¦è€ƒé‡æ—¶é—´çš„å¤§å°ï¼Œå®¹æ˜“æ‰å¸§)ã€‚ä¸ºäº†æé«˜æ€§èƒ½å’Œç”µæ± å¯¿å‘½ï¼Œå› æ­¤åœ¨å¤§å¤šæ•°æµè§ˆå™¨é‡Œï¼Œå½“ requestAnimationFrame() è¿è¡Œåœ¨åå°æ ‡ç­¾é¡µæˆ–è€…éšè—çš„ iframe é‡Œæ—¶ï¼ŒrequestAnimationFrame() ä¼šè¢«æš‚åœè°ƒç”¨ä»¥æå‡æ€§èƒ½å’Œç”µæ± å¯¿å‘½ã€‚</li> <li>requestIdleCallbackï¼šrequestAnimationFrame ä¼šåœ¨æ¯æ¬¡å±å¹•åˆ·æ–°çš„æ—¶å€™è¢«è°ƒç”¨ï¼Œè€Œ requestIdleCallback åˆ™ä¼šåœ¨æ¯æ¬¡å±å¹•åˆ·æ–°æ—¶(ä¹Ÿæ˜¯ æ¯ 16ms è°ƒç”¨)ï¼Œåˆ¤æ–­å½“å‰å¸§æ˜¯å¦è¿˜æœ‰å¤šä½™çš„æ—¶é—´ï¼Œå¦‚æœæœ‰ï¼Œåˆ™ä¼šè°ƒç”¨å›è°ƒï¼Œå®ç°ä¸€äº›é¡µé¢æ€§èƒ½æ–¹é¢çš„çš„ä¼˜åŒ–(<strong>react fiber ä½¿ç”¨äº†ç±»ä¼¼è¯¥ api çš„ polyfill</strong>)</li></ol> <h2 id="æ·±æ‹·è´"><a href="#æ·±æ‹·è´" class="header-anchor">#</a> æ·±æ‹·è´</h2> <p>è€ƒè™‘å¾ªç¯å¼•ç”¨å’Œ Symbolï¼Œä¸è€ƒè™‘å‡½æ•°ï¼Œæš‚æ—¶ä¸è€ƒè™‘ new Number(1)ç”Ÿæˆçš„å¯¹è±¡æ•°å­—ç­‰æƒ…å†µï¼Œ<a href="https://juejin.cn/post/6844903929705136141#heading-11" target="_blank" rel="noopener noreferrer">å‚è€ƒ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">getType</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> val <span class="token operator">=</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> type <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\[object (.*)\]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// ç¬¬ä¸€ä¸ªå°æ‹¬å·åŒ¹é…åˆ°çš„</span>
  <span class="token keyword">return</span> type<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">iteratorObject</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> res<span class="token punctuation">,</span> m</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// è‡ªèº«çš„å¯æšä¸¾ ä¸å¯æšä¸¾å’Œ symbolå±æ€§</span>
  Reflect<span class="token punctuation">.</span><span class="token function">ownKeys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// ç§»é™¤ä¸å¯æšä¸¾</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">propertyIsEnumerable</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      res<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> m<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @param {object}  obj
 * @returns {object} res
 */</span>
<span class="token keyword">const</span> deepClone <span class="token operator">=</span> <span class="token punctuation">(</span>obj<span class="token punctuation">,</span> wm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> obj <span class="token operator">!==</span> <span class="token string">&quot;object&quot;</span> <span class="token operator">||</span> obj <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>wm<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> wm<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è§£å†³å¾ªç¯å¼•ç”¨</span>
  <span class="token keyword">let</span> res<span class="token punctuation">;</span>
  <span class="token keyword">const</span> type <span class="token operator">=</span> <span class="token function">getType</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">&quot;Set&quot;</span><span class="token operator">:</span> <span class="token comment">// å¯ä»¥å†è¡¥å……weakmap wsä¹‹ç±»çš„</span>
      res <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      wm<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
      obj<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> res<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token function">deepClone</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> wm<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">&quot;Map&quot;</span><span class="token operator">:</span>
      res <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      wm<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
      obj<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> res<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> wm<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">&quot;Date&quot;</span><span class="token operator">:</span>
      res <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">&quot;RegExp&quot;</span><span class="token operator">:</span>
      res <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>source<span class="token punctuation">,</span> obj<span class="token punctuation">.</span>flags<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ­£åˆ™è¿™é‡Œéœ€è¦æ”¹è¿›</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">&quot;Array&quot;</span><span class="token operator">:</span>
      res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      wm<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">iteratorObject</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> res<span class="token punctuation">,</span> wm<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">&quot;Object&quot;</span><span class="token operator">:</span>
      res <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
      wm<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">iteratorObject</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> res<span class="token punctuation">,</span> wm<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token comment">// å…¶ä»– è¡¥å……</span>
    <span class="token comment">// return obj;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// è¡¥å……Object(Symbol)çš„æƒ…å†µï¼š</span>
<span class="token keyword">function</span> <span class="token function">cloneSymbol</span><span class="token punctuation">(</span><span class="token parameter">targe</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">Object</span><span class="token punctuation">(</span><span class="token class-name">Symbol</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>targe<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// è¡¥å……argumentsã€windowã€documentçš„toString.call:</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token string">&quot;[object Arguments]&quot;</span><span class="token punctuation">;</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token string">&quot;[object Window]&quot;</span><span class="token punctuation">;</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token string">&quot;[object HTMLDocument]&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> darr <span class="token operator">=</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
darr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//[ 1, 2, [ 3 ] ]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>darr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//[ 5, 2, [ 3 ] ]</span>

<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> dobj <span class="token operator">=</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
dobj<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//{ a: 1 }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dobj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//{ a: 5 }</span>

<span class="token keyword">const</span> s1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> s2 <span class="token operator">=</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">;</span>
s2<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Set(3) { 1, 2, 3 }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Set(4) { 1, 2, 3, 4 }</span>
</code></pre></div><h2 id="æ˜¾å¼ç»‘å®š-callã€applyã€bind"><a href="#æ˜¾å¼ç»‘å®š-callã€applyã€bind" class="header-anchor">#</a> æ˜¾å¼ç»‘å®š callã€applyã€bind</h2> <ol><li>bindï¼Œä¿®æ”¹æŒ‡å‘ä½†ä¸ç›´æ¥æ‰§è¡Œï¼Œå¯ä»¥åˆ†æ‰¹ä¼ å‚
</li></ol> <ul><li>æ‰‹å†™æºç </li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">bind2</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> <span class="token operator">...</span>args1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">this</span> <span class="token operator">!==</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token comment">// è¿™é‡Œä¸ç”¨ç®­å¤´å‡½æ•°æ˜¯å› ä¸ºå¯èƒ½fnæ˜¯æ„é€ å‡½æ•° è¦å®ä¾‹åŒ–</span>
  <span class="token keyword">const</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// è®°å¾—è¦return å› ä¸ºå‡½æ•°è¦æœ‰è¿”å›å€¼</span>
    <span class="token keyword">return</span> <span class="token function">self</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token keyword">instanceof</span> <span class="token class-name">self</span> <span class="token operator">?</span> <span class="token keyword">this</span> <span class="token operator">:</span> ctx<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">...</span>args1<span class="token punctuation">,</span> <span class="token operator">...</span>args2<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">newFn</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">// ä¸ºäº†ç»§æ‰¿functionåŸå‹, èƒ½ç”¨instacneofåˆ¤æ–­æ˜¯å¦newï¼Œå¹¶ä¸”æ–°å¢å±æ€§æˆ–æ–¹æ³•æ—¶ä¸ä¼šæ±¡æŸ“åŸå‹(æ¯”èµ·ç›´æ¥fn.prototype = self.prototype)</span>
  newFn<span class="token punctuation">.</span>prototype <span class="token operator">=</span> self<span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>
  fn<span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">newFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> fn<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">&quot;Jack&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> Yve <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&quot;Yvette&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">person</span><span class="token punctuation">(</span><span class="token parameter">age<span class="token punctuation">,</span> job<span class="token punctuation">,</span> gender</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> job<span class="token punctuation">,</span> gender<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">person</span><span class="token punctuation">(</span><span class="token number">22</span><span class="token punctuation">,</span> <span class="token string">&quot;engineer&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;female&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Jack 22 engineer female</span>
<span class="token keyword">var</span> bindYve <span class="token operator">=</span> person<span class="token punctuation">.</span><span class="token function">bind2</span><span class="token punctuation">(</span>Yve<span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">,</span> <span class="token string">&quot;engineer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">bindYve</span><span class="token punctuation">(</span><span class="token string">&quot;female&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Yvette 22 engineer female</span>
</code></pre></div><ul><li>bind æ³¨æ„äº‹é¡¹ï¼šbind å¤šæ¬¡åæ‰§è¡Œï¼Œå‡½æ•° this è¿˜æ˜¯æŒ‡å‘ç¬¬ä¸€æ¬¡ bind çš„å¯¹è±¡</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token function-variable function">bar</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> obj2 <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> obj3 <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> func <span class="token operator">=</span> <span class="token function">bar</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>obj1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>

func <span class="token operator">=</span> <span class="token function">bar</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>obj1<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>obj2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>

func <span class="token operator">=</span> <span class="token function">bar</span>
  <span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>obj1<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>obj2<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>obj3<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
</code></pre></div><ol start="2"><li>call &amp; apply
call æ¥å—ä¸Šä¸‹æ–‡å’Œå‚æ•°åˆ—è¡¨ï¼Œapply æ¥å—ä¸Šä¸‹æ–‡å’Œæ•°ç»„(æˆ–ç±»æ•°ç»„)</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// applyåªéœ€è¦æŠŠ...argsæ”¹æˆargs</span>
<span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">call2</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// å‰©ä½™å‚æ•°ä¸ç”¨å’Œç®­å¤´å‡½æ•°ä¸€èµ·;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">this</span> <span class="token operator">!==</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// é”™è¯¯å¤„ç†</span>
  context <span class="token operator">=</span> context <span class="token operator">??</span> window<span class="token punctuation">;</span> <span class="token comment">// éä¸¥æ ¼æ¨¡å¼ä¸‹ undefinedæˆ–null ä¼šåŒ…è£…ä¸ºwindow</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> context <span class="token operator">!==</span> <span class="token string">&quot;object&quot;</span> <span class="token operator">||</span> context <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
    context <span class="token operator">=</span> <span class="token function">Object</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç®€å•ç±»å‹ åŒ…è£…ä¸ºå¯¹è±¡</span>
  <span class="token keyword">const</span> key <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// é˜²æ­¢é‡å</span>
  context<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span> <span class="token comment">// contextæ˜¯å¯¹è±¡</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> context<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‰§è¡Œæ—¶éšå¼ç»‘å®šä¸ºcontext</span>
  <span class="token keyword">delete</span> context<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// åˆ é™¤symbol key</span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="new-æ“ä½œç¬¦"><a href="#new-æ“ä½œç¬¦" class="header-anchor">#</a> new æ“ä½œç¬¦</h2> <p>æ­¥éª¤ï¼šåˆ›å»ºå¯¹è±¡å¹¶æ”¹å˜åŸå‹å¯¹è±¡ï¼Œä¿®æ”¹ this æŒ‡å‘ï¼Œæ‰§è¡Œå‡½æ•°ï¼Œè¿”å›çš„æ˜¯å¼•ç”¨ç±»å‹åˆ™è¿”å›è¿™ä¸ªå¼•ç”¨ç±»å‹æ•°æ®ï¼Œå¦åˆ™è¿”å›å®ä¾‹</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">myNew</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> obj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>fn<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> result <span class="token operator">!==</span> <span class="token string">&quot;object&quot;</span> <span class="token operator">||</span> result <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="åŒåŸŸè·¨é¡µé¢é€šä¿¡"><a href="#åŒåŸŸè·¨é¡µé¢é€šä¿¡" class="header-anchor">#</a> åŒåŸŸè·¨é¡µé¢é€šä¿¡</h2> <ol><li>sw+postMessage</li> <li>localStorage + ç›‘å¬ storage äº‹ä»¶</li> <li>indexedDB(å®¹é‡å¤§ã€å¼‚æ­¥ã€åŒæºç­–ç•¥)</li></ol> <h2 id="å¤„ç†æ‰€æœ‰-async-çš„é”™è¯¯"><a href="#å¤„ç†æ‰€æœ‰-async-çš„é”™è¯¯" class="header-anchor">#</a> å¤„ç†æ‰€æœ‰ async çš„é”™è¯¯</h2> <ol><li>äº‹ä»¶ç›‘å¬</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;unhandledrejection&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  event<span class="token punctuation">.</span>reason<span class="token punctuation">;</span> <span class="token comment">//è·å–åˆ°catchçš„errçš„åŸå› (å†…å®¹) ä¸æ§åˆ¶å°æŠ¥é”™ä¸€è‡´</span>
  event<span class="token punctuation">.</span>promise<span class="token punctuation">;</span> <span class="token comment">//è·å–åˆ°æœªå¤„ç†çš„promiseå¯¹è±¡</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="2"><li>å°è£…ä¸€å±‚ promise
</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">handler</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">promise</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> promise
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token keyword">undefined</span><span class="token punctuation">,</span> res<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>err<span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// erræ˜¯æœ‰å€¼çš„æƒ…å†µ</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><ol start="3"><li>æ‰‹å†™ä¸ª babel æ’ä»¶å¤„ç†
æ€è·¯ï¼šå¯»æ‰¾æ¯ä¸ª awaitï¼Œç„¶åå†åŠ ä¸Šå¯¹åº”çš„ try catch</li></ol> <h2 id="é•¿è¿æ¥-æŒä¹…è¿æ¥"><a href="#é•¿è¿æ¥-æŒä¹…è¿æ¥" class="header-anchor">#</a> é•¿è¿æ¥(æŒä¹…è¿æ¥)</h2> <ol><li>å¸¸è§„è½®è¯¢ä¸é•¿è½®è¯¢</li></ol> <ul><li>å¸¸è§„è½®è¯¢ï¼šæ¯ n ç§’è¯·æ±‚ä¸€æ¬¡ï¼Œç¼ºç‚¹æ˜¯å¼€é”€å¤§ï¼Œæµªè´¹æœåŠ¡ç«¯èµ„æº</li> <li>é•¿è½®è¯¢ï¼šæœåŠ¡å™¨åœ¨æœ‰æ¶ˆæ¯ä¹‹å‰ä¸ä¼šå…³é—­è¿æ¥(æœåŠ¡ç«¯)ï¼Œè¿›å…¥ pending çŠ¶æ€ï¼Œæ¶ˆæ¯å‡ºç°æ—¶è¿›è¡Œå“åº”ï¼Œç¼ºç‚¹æ˜¯ç¼–å†™å¤æ‚</li> <li>ç¼ºç‚¹ï¼šæ¯ä¸ªæ¶ˆæ¯éƒ½æ˜¯ä¸€ä¸ªå•ç‹¬çš„è¯·æ±‚ï¼Œå¹¶å¸¦æœ‰ headerï¼Œèº«ä»½éªŒè¯å¼€é”€ç­‰(cookie ç­‰)ï¼Œå¼€é”€å¤§ï¼Œæ€§èƒ½ä¸å¥½ï¼Œå› æ­¤è¦é‡‡ç”¨ websocket æˆ– server sent events ç­‰</li></ul> <ol start="2"><li>ws çš„ä¼˜åŠ¿ï¼š</li></ol> <ul><li>æ²¡æœ‰è·¨åŸŸé™åˆ¶</li> <li>é•¿è¿æ¥ï¼šæ•°æ®å¯ä»¥ä½œä¸ºâ€œæ•°æ®åŒ…â€åœ¨ä¸¤ä¸ªæ–¹å‘ä¸Šä¼ é€’(åŒå‘)ï¼Œè€Œæ— éœ€ä¸­æ–­è¿æ¥ä¹Ÿæ— éœ€é¢å¤–çš„ HTTP è¯·æ±‚ï¼Œå¼€é”€å°</li> <li>ç”±äº ws å§‹ç»ˆä¿æŒè¿æ¥ï¼Œå› æ­¤ä¸éœ€è¦ cookieï¼Œéœ€è¦ cookie çš„æ—¶å€™å¯ä»¥ä¸»åŠ¨å‘é€ï¼Œå¼€é”€å°</li></ul> <h2 id="å¯è¿­ä»£å±æ€§-è¿­ä»£å™¨å¯¹è±¡"><a href="#å¯è¿­ä»£å±æ€§-è¿­ä»£å™¨å¯¹è±¡" class="header-anchor">#</a> å¯è¿­ä»£å±æ€§(è¿­ä»£å™¨å¯¹è±¡)</h2> <ul><li>è¿­ä»£å™¨å¯¹è±¡ä¸ç±»æ•°ç»„æ²¡æœ‰ä»»ä½•å…³ç³»</li> <li>ä¾‹å¦‚ new Map()/Set().keys()/values()/entries()</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> map1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

map1<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map1<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;bar&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> iterator1 <span class="token operator">=</span> map1<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>iterator1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// expected output:  Array [Array [&quot;0&quot;, &quot;foo&quot;], Array [1, &quot;bar&quot;]]</span>

<span class="token comment">// console.log(iterator1.next().value);</span>
<span class="token comment">// expected output: [1, &quot;bar&quot;]</span>

<span class="token keyword">const</span> iterator1 <span class="token operator">=</span> map1<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iterator1<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// expected output: &quot;0&quot;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iterator1<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// expected output: Object { value: 1, done: false }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iterator1<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// expected output: {value: undefined, done: true}</span>
</code></pre></div><h2 id="js-è„šæœ¬çš„å»¶è¿ŸåŠ è½½"><a href="#js-è„šæœ¬çš„å»¶è¿ŸåŠ è½½" class="header-anchor">#</a> JS è„šæœ¬çš„å»¶è¿ŸåŠ è½½</h2> <ol><li>defer</li></ol> <ul><li>ä¸ä¼šé˜»å¡é¡µé¢</li> <li>è„šæœ¬è¦ç­‰åˆ° DOM è§£æå®Œæ¯•ï¼Œä½†åœ¨ DOMContentLoaded äº‹ä»¶ä¹‹å‰æ‰§è¡Œ</li> <li>å…·æœ‰ defer ç‰¹æ€§çš„è„šæœ¬ä¿æŒå…¶ç›¸å¯¹é¡ºåºï¼Œå°±åƒå¸¸è§„è„šæœ¬ä¸€æ ·</li></ul> <ol start="2"><li>async</li></ol> <ul><li>ä¹Ÿä¸ä¼šé˜»å¡é¡µé¢</li> <li>DOMContentLoaded å’Œå¼‚æ­¥è„šæœ¬ä¸ä¼šå½¼æ­¤ç­‰å¾…(ä¸ defer ä¸åŒ)</li> <li>å…¶ä»–è„šæœ¬ä¸ä¼šç­‰å¾… async è„šæœ¬åŠ è½½å®Œæˆï¼ŒåŒæ ·ï¼Œasync è„šæœ¬ä¹Ÿä¸ä¼šç­‰å¾…å…¶ä»–è„šæœ¬ã€‚(æ¯”å¦‚ä¸¤ä¸ª async è„šæœ¬è°å…ˆåŠ è½½å®Œè°æ‰§è¡Œ)</li></ul> <h2 id="window-å’Œ-document"><a href="#window-å’Œ-document" class="header-anchor">#</a> window å’Œ document</h2> <ol><li>window å¯¹è±¡è¡¨ç¤ºæµè§ˆå™¨ä¸­æ‰“å¼€çš„çª—å£ï¼Œå¦‚æœæœ‰ iframe åˆ™è¿˜æœ‰ iframe çš„ window</li> <li>document å¯¹è±¡è¡¨ç¤º html æ–‡æ¡£ï¼ŒåŒ…æ‹¬æ–‡æ¡£ä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œæ˜¯ window å¯¹è±¡çš„ä¸€éƒ¨åˆ†</li></ol> <h2 id="ç”Ÿæˆå™¨-generator"><a href="#ç”Ÿæˆå™¨-generator" class="header-anchor">#</a> ç”Ÿæˆå™¨ Generator</h2> <ul><li>å¼‚æ­¥çš„ä¸€ç§æ–¹æ¡ˆï¼Œyield è¡¨è¾¾å¼å¯ä»¥æš‚åœå‡½æ•°æ‰§è¡Œï¼Œnext æ–¹æ³•ç”¨äºæ¢å¤å‡½æ•°æ‰§è¡Œï¼Œå¼‚æ­¥ä»»åŠ¡åŒæ­¥åŒ–ï¼Œåæ¥ await ä»£æ›¿äº† yield è¿›è¡Œç­‰å¾…ï¼Œæ›´åŠ ç®€æ´å’Œè¯­ä¹‰åŒ–</li> <li>æœ¬è´¨ä¸Šæ˜¯ä¸€ç§çŠ¶æ€æœºï¼Œç»è¿‡ babel è½¬è¯‘åå‘ç°æ˜¯ switch case æ§åˆ¶æµ</li></ul> <h2 id="è£…é¥°å™¨-decorator"><a href="#è£…é¥°å™¨-decorator" class="header-anchor">#</a> è£…é¥°å™¨ Decorator</h2> <ul><li>æ€æƒ³å’Œè£…é¥°è€…æ¨¡å¼ä¸€æ ·ï¼Œè£…é¥°å™¨æ˜¯å‡½æ•°ï¼Œæ”¾åœ¨ç±»æˆ–è€…ç±»çš„å±æ€§/æ–¹æ³•çš„å®šä¹‰ä¹‹å‰ï¼Œç”¨äºå¢å¼ºç±»ï¼Œæ‹“å±•åŠŸèƒ½ï¼Œè¿˜èƒ½èµ·åˆ°æ³¨é‡Šçš„ä½œç”¨</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 1.å®šä¹‰ç±»:</span>
<span class="token keyword">class</span> <span class="token class-name">soldier</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token comment">// 2. å®šä¹‰è£…é¥°å™¨</span>
<span class="token keyword">function</span> <span class="token function">strong</span><span class="token punctuation">(</span><span class="token parameter">target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  target<span class="token punctuation">.</span>weapon <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// å…·æœ‰æ­¦å™¨</span>
<span class="token punctuation">}</span>
<span class="token comment">// 3. å¢å¼ºç±»</span>
@strong
<span class="token keyword">class</span> <span class="token class-name">soldier</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// æ³¨æ„ï¼šclassä¸èƒ½é‡å¤å£°æ˜</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>soldier<span class="token punctuation">.</span>weapon<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>è£…é¥°å™¨ä¸èƒ½ä½œç”¨äºå‡½æ•°ï¼Œå› ä¸ºå¯èƒ½å­˜åœ¨å˜é‡æå‡ï¼Œå¯¼è‡´å¤±æ•ˆã€‚(class æ²¡æœ‰å˜é‡æå‡æ‰€ä»¥å¯ä»¥)</li> <li>è¡¥å……ï¼šå®ä¾‹æ–¹æ³•æ˜¯ç»§æ‰¿åˆ°å®ä¾‹ä¸­çš„æ–¹æ³•ï¼Œé™æ€æ–¹æ³•æ˜¯æ„é€ å‡½æ•°ä¸­çš„æ–¹æ³•ï¼Œå¤–éƒ¨å¯ä»¥è°ƒç”¨ï¼Œç§æœ‰æ–¹æ³•æ˜¯æ„é€ å‡½æ•°ä¸­å®šä¹‰çš„æ–¹æ³•ï¼Œå¤–éƒ¨ä¸èƒ½ç›´æ¥ç”¨ä½†å¯ä»¥ç”¨é—­åŒ…è°ƒç”¨</li></ul> <h2 id="tips"><a href="#tips" class="header-anchor">#</a> tips</h2> <p><strong>1ã€ç©ºå­—ç¬¦ä¸²çš„ç´¢å¼•</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">&quot;123&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//0</span>
</code></pre></div><p><strong>2ã€<a href="https://www.cnblogs.com/echolun/p/7646025.html" target="_blank" rel="noopener noreferrer">substrã€substringã€slice çš„åŒºåˆ«<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong></p> <p><strong>3ã€Math.max()å’Œ min()çš„å‘</strong><br>
Math.max()å¦‚æœä¸æ¥å—å‚æ•°åˆ™è¿”å›-Infinityï¼ŒåŒç† Math.min()è¿”å› Infinityï¼Œå¦‚æœæ¥å—çš„å‚æ•°ä¸èƒ½è½¬åŒ–ä¸ºæ•°å­—æˆ–è€…æ¥å— NaNï¼Œåˆ™è¿”å› NaNã€‚å¦å¤–å…³äº mapï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> m <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">...</span>m<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ç©ºçš„è¿­ä»£å™¨å¯¹è±¡ç”¨æ‹“å±•è¿ç®—ç¬¦ä¸æ‰“å°,æ³¨æ„æ˜¯ä¸æ‰“å°è€Œä¸æ˜¯æ‰“å°ç©ºå­—ç¬¦ä¸²</span>

<span class="token function">Number</span><span class="token punctuation">(</span><span class="token string">'0'</span><span class="token punctuation">)</span>
<span class="token number">0</span>
<span class="token function">Number</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
<span class="token number">0</span>
<span class="token function">Number</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token number">0</span>

Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">1</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">100</span>  <span class="token comment">//å†…éƒ¨æ˜¯è°ƒç”¨äº†Number()çš„è¿‡ç¨‹</span>
</code></pre></div><p><a href="https://leetcode-cn.com/problems/brick-wall/" target="_blank" rel="noopener noreferrer">å‚è€ƒèµ„æ–™<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><strong>4ã€ä½è¿ç®—</strong><br>
**å¼‚æˆ–ï¼š**äºŒè¿›åˆ¶ç›¸åŒä½ç»“æœä¸º 0ï¼Œä¸åŒä½ç»“æœä¸º 1ï¼Œå³ä¸è¿›ä½ç›¸åŠ ã€‚eg:a^b = c, a^b^b = a, å³ c^b=a åŒç† c^a =b;äº”æœˆä»½åŠ›æ‰£æ¯æ—¥ä¸€é¢˜å¤šæ¬¡å‡ºç°å¼‚æˆ–è¿ç®—ã€‚</p> <p><strong>5ã€ç§æœ‰æ–¹æ³•ä¸é™æ€æ–¹æ³•</strong><br> <a href="https://juejin.cn/post/6844904164913315853" target="_blank" rel="noopener noreferrer">å‚è€ƒ 1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://www.cnblogs.com/huangshikun/p/6509822.html" target="_blank" rel="noopener noreferrer">å‚è€ƒ 2<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br>
ES5 çš„ Person.name è¿™ç§é™æ€å±æ€§ç›¸å½“äº ES6 è¿­ä»£ static å…³é”®å­—</p> <p><strong>6ã€ECMAScript</strong></p> <ul><li>1995 å¹´ï¼Œç½‘æ™¯å·¥ç¨‹å¸ˆ Brendan Eich(å¸ƒå…°ç™»Â·è‰¾å¥‡)èŠ±äº† 10 å¤©æ—¶é—´è®¾è®¡äº† JavaScript è¯­è¨€ï¼Œ1996 å¹´å¾®è½¯å‘å¸ƒäº† JScriptï¼ŒåŒæ—¶æ‹‰å¼€äº† Navigator å’Œ Internet Explorer æµè§ˆå™¨å¤§æˆ˜çš„åºå¹•ï¼ˆåˆ° 2002 å¹´ IE å®Œèƒœï¼Œå æ®å…¨ä¸–ç•Œ 96%çš„å¸‚åœºä»½é¢ï¼‰</li> <li>ä¸ºäº†è®©å„å¤§æµè§ˆå™¨ç»Ÿä¸€ç¼–ç¨‹è§„èŒƒï¼Œ1997 å¹´ 6 æœˆ ECMAï¼ˆæ¬§æ´²è®¡ç®—æœºåˆ¶é€ è”åˆä¼šï¼‰ä»¥ JavaScript è¯­è¨€ä¸ºåŸºç¡€åˆ¶å®šäº† ECMAScript æ ‡å‡†è§„èŒƒ ECMA-262ï¼Œä»æ­¤æµè§ˆå™¨å‚å•†éƒ½æ˜¯æŒ‰ç…§è¿™ä¸ªè§„èŒƒæ¥å¼€å‘è‡ªå·±çš„æµè§ˆå™¨äº§å“ï¼›</li> <li>1999 å¹´ 12 æœˆ ES3 å‘å¸ƒï¼Œåˆ° 2011 å¹´ 6 æœˆ ES5 å‘å¸ƒï¼ˆ2007 å¹´çš„ ES4 å¤­æŠ˜ï¼šæ”¹åŠ¨å¤ªå¤§ï¼‰ï¼ŒES3 å æ®äº† 10 å¹´å†ç¨‹ï¼Œä¹Ÿæ˜¯ JS è¯­è¨€çš„åŸºç¡€ã€‚2015 å¹´ 6 æœˆ ES6 å‘å¸ƒï¼ˆä½†æ˜¯ç”±äºä¹‹åè§„å®šæ¯å¹´å‘å¸ƒä¸€ä¸ªæ–°çš„ç‰ˆæœ¬ï¼Œæ‰€ä»¥åæ”¹å ES2015ï¼‰ï¼Œ2016 å¹´ 6 æœˆå¯¹ 2015 ç‰ˆæœ¬å¢å¼ºçš„ 2016 ç‰ˆæœ¬å‘å¸ƒï¼Œæ­¤åç›¸ç»§æœ‰ ES2017ã€ES2018â€¦</li></ul> <hr> <ul><li>ES2015(ES6)ï¼šlet/constã€è§£æ„èµ‹å€¼ã€æ•°ç»„/å¯¹è±¡ç­‰æ–¹æ³•æ‰©å±•ã€Symbolã€Set/Mapã€Proxyã€Reflectã€Promiseã€Iterator(for of)ã€Generatorã€Classã€ES6Module...</li> <li>ES2016(ES7)ï¼šArray.prototype.includesã€æŒ‡æ•°è¿ç®—ç¬¦(a**b)...</li> <li>ES2017(ES8)ï¼šasync/awaitã€Promise.prototype.finallyã€Object.values/entries/getOwnPropertyDescriptorsã€å­—ç¬¦ä¸²å¡«å…… padStart å’Œ padEndã€SharedArrayBuffer å…±äº«å†…å­˜ã€Atomic åŸå­æ“ä½œ...</li> <li>ES2018(ES9)ï¼šå¯¹è±¡çš„æ‹“å±•è¿ç®—ç¬¦ã€æ­£åˆ™è¡¨è¾¾å¼ä¸Šçš„ä¸€äº›å‡çº§ã€å¼‚æ­¥éå†å™¨...</li> <li>ES2019(ES10)ï¼šString.prototype.trimStart/trimEndã€Object.fromEntriesã€Array.prototype.flat/flatMapã€catch çš„å‚æ•°æ”¹ä¸ºå¯é€‰ã€Symbol.descriptionã€JSON Superset è¶…é›†ã€stringify åŠ å¼ºæ ¼å¼è½¬åŒ–ã€Array.prototype.sort æ›´åŠ ç¨³å®šã€Function.prototype.toString é‡æ–°ä¿®è®¢...</li> <li>ES2020(ES11)ï¼šString.prototype.matchAllã€import() ã€BigIntã€Promise.allSettledã€globalThisã€å¯é€‰é“¾ã€ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦ã€export * as ns from â€œmodâ€ã€for-in æœºåˆ¶å®Œå–„...</li> <li>ES2021(ES12)ï¼šString.prototype.replaceAllã€Promise.anyã€WeakRefsã€??=ã€||=ã€&amp;&amp;=ã€Numeric separators(æ•°å­—åˆ†éš”ç¬¦)..</li></ul> <p><strong>7ã€æ•°æ®ç±»å‹åˆ†ç±»</strong><br>
åŸå§‹å€¼ç±»å‹ã€Œprimitive valuesã€ï¼šåŸºæœ¬æ•°æ®ç±»å‹ã€å€¼ç±»å‹<br>
Â Â  â€¢ number<br>
Â Â  â€¢ string<br>
Â Â  â€¢ boolean<br>
Â Â  â€¢ null<br>
Â Â  â€¢ undefined<br>
Â Â  â€¢ symbol<br>
Â Â  â€¢ bigint<br>
å¯¹è±¡ç±»å‹ã€Œobjectã€ï¼šå¼•ç”¨æ•°æ®ç±»å‹<br>
Â Â  â€¢ æ ‡å‡†æ™®é€šå¯¹è±¡ Object<br>
Â Â  â€¢ æ ‡å‡†ç‰¹æ®Šå¯¹è±¡ Arrayã€RegExpã€Dateã€Error...<br>
Â Â  â€¢ å‡½æ•°å¯¹è±¡ Function<br>
Â Â  â€¢ éæ ‡å‡†ç‰¹æ®Šå¯¹è±¡ Numberã€Stringã€Boolean...</p> <div class="custom-block tip"><p class="custom-block-title">æç¤º</p> <p>æ‰©å±•ï¼šæ•°æ®ç±»å‹è½¬æ¢è§„åˆ™ã€æ•°æ®ç±»å‹æ£€æµ‹ã€äºŒè¿›åˆ¶çš„å¤„ç†(è¿›åˆ¶è½¬æ¢)ã€å †æ ˆå†…å­˜åŠåº•å±‚å¤„ç†æœºåˆ¶ã€è£…ç®±(æ‹†ç®±)ç­‰ç­‰</p></div> <p><strong>8ã€push å’Œ unshift ç»†èŠ‚</strong><br>
è¿”å›çš„æ˜¯æ•°ç»„çš„æ–°çš„é•¿åº¦</p> <p><strong>9ã€arr.map(parseInt)</strong>
é—®é¢˜å‡ºåœ¨ map æ–¹æ³•æ¥å—çš„å›è°ƒçš„å‚æ•°çš„é»˜è®¤é—®é¢˜ï¼Œcb çš„ç¬¬äºŒä¸ªå‚æ•°ä¸ºç´¢å¼•ï¼Œç´¢å¼•åˆå˜æˆäº† parseInt çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œåˆ™äº§ç”Ÿè¿›åˆ¶é—®é¢˜ï¼Œå¦‚['1', '2', '3'].map(parseInt) =&gt; [1, NaN, NaN]ã€‚<br>
parseInt å’Œ Number çš„åŒºåˆ«ï¼š<br>
1ã€Number å¯¹äºéå­—ç¬¦ä¸²å¯ä»¥å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œæ¯”å¦‚ Number([1]) === 1<br>
2ã€Number('11x') =&gt; NaN, parseInt('11x') === 11, å¿½ç•¥åé¢éæ•°å­—çš„éƒ¨åˆ†<br>
3ã€parseInt ç¬¬äºŒä¸ªå‚æ•°æ˜¯æŒ‡å®šä»¥ä»€ä¹ˆè¿›åˆ¶å»è§£æç¬¬ä¸€ä¸ªå‚æ•° string(è¿”å›åè¿›åˆ¶)ï¼Œå¦‚æœçœç•¥è¯¥å‚æ•°æˆ–å…¶å€¼ä¸º 0 åˆ™æ˜¯åè¿›åˆ¶(å–å†³äºæµè§ˆå™¨)ï¼Œå°äº 2 å¤§äº 36 éƒ½æ˜¯ NaNï¼Œæ¯”å¦‚ parseInt(3,2), 3 ä¸æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶ï¼Œæ‰€ä»¥è§£æä¸äº†ï¼Œè¿”å› NaN<br>
4ã€parseInt æ˜¯å…¶ä»–è¿›åˆ¶è½¬åŒ–ä¸ºåè¿›åˆ¶ã€toString æ˜¯åè¿›åˆ¶è½¬åŒ–ä¸ºå…¶ä»–è¿›åˆ¶</p> <p><strong>10ã€for å¾ªç¯çš„ç‰¹æ®Šç”¨æ³•</strong> <a href="https://leetcode-cn.com/problems/longest-common-prefix/" target="_blank" rel="noopener noreferrer">14. æœ€é•¿å…¬å…±å‰ç¼€<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// é¢˜è§£ éƒ¨åˆ†ä»£ç </span>
<span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>length<span class="token punctuation">,</span> strs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">!==</span> strs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">break</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
res <span class="token operator">=</span> res<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>11ã€å¯¹è±¡çš„è¿ç»­è§£æ„èµ‹å€¼+é‡å‘½å</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token punctuation">{</span> b<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>
  a<span class="token operator">:</span> <span class="token punctuation">{</span> b<span class="token operator">:</span> data <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token operator">=</span> obj<span class="token punctuation">;</span>
<span class="token comment">//ç›¸å½“äºå°†bå˜é‡é‡å‘½åä¸ºdata</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//1</span>
<span class="token comment">// æ³¨æ„ï¼šè¿ç»­è§£æ„èµ‹å€¼ åªèƒ½æ‹¿åˆ°æœ€åçš„å˜é‡ï¼Œå¦‚æœæ‰“å°aï¼Œåˆ™æŠ¥é”™</span>
</code></pre></div><p><strong>12ã€VOG GO EC(G)</strong><br>
VOG å…¨å±€å˜é‡å¯¹è±¡\GO å…¨å±€å¯¹è±¡\EC(G)å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡<br>
EC(G)ä¸‹æœ‰ VOG VOG é‡Œæœ‰ GO(?) ç”Ÿæˆçš„ æœ‰çš„æ”¾åœ¨ VOG æœ‰çš„ GO</p> <p>å…¨å±€ä¸Šä¸‹æ–‡çš„ var function å­˜åœ¨äº GO ã€å…¨å±€ä¸Šä¸‹æ–‡çš„ let const å­˜åœ¨äº VOG(script ä½œç”¨åŸŸ)<br> <s>å‡½æ•°åœ¨å­˜å‚¨çš„æ—¶å€™ å †ä¸­å­˜å‚¨åˆ†ä¸ºä¸‰éƒ¨åˆ†</s></p> <p><strong>13ã€Object.prototype.toString.call(å„ç§ç±»å‹å¯¹è±¡)</strong></p> <p>1ã€å¯ä»¥ç”¨æ¥åˆ¤æ–­æ•°ç»„ç­‰å¯¹è±¡ï¼š&quot;[object Array]&quot;<br>
2ã€1 å’Œ new Number(1)éƒ½æ˜¯&quot;[object Number]&quot;</p> <p><strong>14ã€å˜é‡æå‡</strong><br>
1ã€let çš„ã€Œåˆ›å»ºã€è¿‡ç¨‹è¢«æå‡äº†ï¼Œä½†æ˜¯åˆå§‹åŒ–æ²¡æœ‰æå‡ã€‚<br>
2ã€var çš„ã€Œåˆ›å»ºã€å’Œã€Œåˆå§‹åŒ–ã€éƒ½è¢«æå‡äº†ã€‚<br>
3ã€function çš„ã€Œåˆ›å»ºã€ã€Œåˆå§‹åŒ–ã€å’Œã€Œèµ‹å€¼ã€éƒ½è¢«æå‡äº†ã€‚<br> <a href="https://www.jianshu.com/p/0f49c88cf169" target="_blank" rel="noopener noreferrer">å¯ä»¥çœ‹çœ‹<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><strong>15ã€for in</strong><br>
å­—ç¬¦ä¸²ä¹Ÿèƒ½ for in è¾“å‡ºç´¢å¼•</p> <p><strong>16ã€V8 æ€§èƒ½å¥½çš„åŸå› </strong><br>
1ã€JIT å­—èŠ‚ç (hot) =&gt; æœºå™¨ç <br>
2ã€å†…åµŒç¼“å­˜(å’Œä¸Šé¢ç±»ä¼¼)<br>
3ã€æ›´ç²¾ç¡®çš„åƒåœ¾å›æ”¶æœºåˆ¶</p> <p><strong>17ã€å‡½æ•°ç®€å†™çš„æ€è€ƒ</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> get<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

obj<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined  (0824 in CAINiAO)</span>
</code></pre></div><p><strong>18ã€ç±»ä¸­çš„æ–¹æ³•é»˜è®¤å¼€å¯äº†ä¸¥æ ¼æ¨¡å¼</strong><br> <strong>19ã€ç®­å¤´å‡½æ•°çš„ä¸¥æ ¼æ¨¡å¼ä¸éä¸¥æ ¼æ¨¡å¼çš„è¡Œä¸ºä¸€è‡´</strong><br> <strong>20ã€async+forEach çš„é—®é¢˜</strong><br>
ç”±äº async å’Œ await æ”¾åœ¨äº†å¾ªç¯å†…éƒ¨ï¼Œæ‰€ä»¥è¡¨ç°ä¸ºå¹¶è¡Œï¼Œæ”¹æˆå¤–éƒ¨ asyncï¼Œå†…éƒ¨ for å¾ªç¯ï¼Œå°±å¯ä»¥é—´éš” x ç§’æ‰“å°ç›¸åº”æ•°æ®<br> <strong>21ã€var å’Œ no var çš„åŒºåˆ«</strong></p> <ul><li>no var èµ‹å€¼çš„å˜é‡å¯ä»¥ç”¨ delete åˆ é™¤ window ä¸Šçš„å±æ€§</li> <li>åœ¨å‡½æ•°ä¸­å£°æ˜æ—¶ï¼Œno var èµ‹å€¼çš„å˜é‡ä½œç”¨äºå…¨å±€ä½œç”¨åŸŸï¼Œvar ä½œç”¨äºå‡½æ•°(å±€éƒ¨ local ä½œç”¨åŸŸ)ä½œç”¨åŸŸ</li></ul> <p><strong>22ã€WeakMap å’Œ WeakSet ä¸ Map å’Œ Set çš„åŒºåˆ«</strong></p> <ul><li>WeakMap åªæ¥å—å¯¹è±¡ä½œä¸ºé”®åï¼ˆnull é™¤å¤–ï¼‰ï¼Œä¸æ¥å—å…¶ä»–ç±»å‹çš„å€¼ä½œä¸ºé”®å,å€¼ä»»æ„ï¼›WeakSet çš„å€¼åªèƒ½æ˜¯å¯¹è±¡(ä¸èƒ½æ˜¯ null)</li> <li>å¼•ç”¨(é¿å…å†…å­˜æ³„æ¼)ï¼šWeakMap æŒæœ‰çš„æ˜¯æ¯ä¸ªé”®å¯¹è±¡çš„â€œå¼±å¼•ç”¨â€ï¼Œè¿™æ„å‘³ç€åœ¨æ²¡æœ‰å…¶ä»–å¼•ç”¨å­˜åœ¨æ—¶åƒåœ¾å›æ”¶èƒ½æ­£ç¡®è¿›è¡Œ</li> <li>æ²¡æœ‰éå†çš„æ–¹æ³•æ¯”å¦‚ forEachï¼Œä¹Ÿæ²¡æœ‰ size å±æ€§ï¼Œå› ä¸ºä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™å°±è¢«åƒåœ¾å›æ”¶äº†</li></ul> <p><strong>23ã€Number.EPSILON å€¼ä¸º 2^-52</strong><br> <strong>24ã€sessionStorage çš„é—®é¢˜</strong>ï¼šå¤šçª—å£ä¹‹é—´ sessionStorage ä¸å¯ä»¥å…±äº«çŠ¶æ€ï¼Œä½†æ˜¯åœ¨æŸäº›ç‰¹å®šåœºæ™¯ä¸‹æ–°å¼€çš„åŒæºé¡µé¢ä¼šå¤åˆ¶ä¹‹å‰é¡µé¢çš„ sessionStorageï¼Œæ³¨æ„æ˜¯å¤åˆ¶æ–°å¼€æ—¶çš„çŠ¶æ€è€Œä¸æ˜¯å…±äº«ï¼Œæ¯”å¦‚ A é¡µé¢ä¸­ window.open(ä¸ A åŒæºçš„ B é¡µé¢)æˆ– ç‚¹å‡» a æ ‡ç­¾</p> <ul><li>é¡µé¢ä¼šè¯åœ¨æµè§ˆå™¨æ‰“å¼€æœŸé—´ä¸€ç›´ä¿æŒï¼Œå¹¶ä¸”é‡æ–°åŠ è½½æˆ–æ¢å¤é¡µé¢ä»ä¼šä¿æŒåŸæ¥çš„é¡µé¢ä¼šè¯ã€‚</li> <li>åœ¨æ–°æ ‡ç­¾æˆ–çª—å£æ‰“å¼€ä¸€ä¸ªé¡µé¢æ—¶ä¼šå¤åˆ¶é¡¶çº§æµè§ˆä¼šè¯çš„ä¸Šä¸‹æ–‡ä½œä¸ºæ–°ä¼šè¯çš„ä¸Šä¸‹æ–‡ï¼Œ è¿™ç‚¹å’Œ session cookies çš„è¿è¡Œæ–¹å¼ä¸åŒã€‚</li> <li>æ‰“å¼€å¤šä¸ªç›¸åŒçš„ URL çš„ Tabs é¡µé¢ï¼Œä¼šåˆ›å»ºå„è‡ªçš„ Â sessionStorageã€‚</li> <li>å…³é—­å¯¹åº”æµè§ˆå™¨æ ‡ç­¾æˆ–çª—å£ï¼Œä¼šæ¸…é™¤å¯¹åº”çš„ Â sessionStorageã€‚</li></ul> <p><strong>25ã€åˆ›å»º 26 ä¸ªè‹±æ–‡å­—æ¯æ•°ç»„</strong>ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">65</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">91</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// iæ˜¯asciiç </span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">65</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token constant">A</span>   <span class="token number">97</span> <span class="token operator">-</span><span class="token operator">&gt;</span> a
</code></pre></div><p><strong>26ã€å¼ºå¼±ç±»å‹/åŠ¨é™æ€</strong>ï¼šå¼ºå¼±çš„åŒºåˆ†æ˜¯æ˜¯å¦èƒ½è¿›è¡Œéšå¼è½¬åŒ–ï¼Œæ¯”å¦‚ç›¸åŠ æ˜¯å¦æŠ¥é”™ï¼›åŠ¨é™çš„åŒºåˆ†æ˜¯è¿è¡Œæ—¶æ˜¯å¦èƒ½æ”¹å˜å˜é‡ç±»å‹ï¼Œå› æ­¤ python æ˜¯å¼ºç±»å‹ï¼ŒJS æ˜¯å¼±ç±»å‹ï¼ŒäºŒè€…éƒ½æ˜¯åŠ¨æ€è¯­è¨€ã€‚<br> <strong>27ã€Object çš„å±æ€§æ˜¯æŒ‰ç…§æ•°å­—å‡åº(å¦‚æœå±æ€§æ˜¯éè´Ÿæ•´æ•°æ—¶)ï¼ŒMap æŒ‰ç…§æ’å…¥é¡ºåº</strong></p> <ul><li>å› æ­¤ï¼Œå¦‚æœå¼ºçƒˆä¾èµ–æ’å…¥é¡ºåºï¼Œé‚£ä¹ˆ Map å¯ä»¥ä¿è¯è¿™ä¸€ç‚¹ã€‚</li> <li>æ³¨æ„ï¼ŒMap æˆ– Set çš„æ’å…¥é¡ºåºæ˜¯æŒ‰ç…§ç¬¬ä¸€æ¬¡æ’å…¥è€Œå®šçš„ï¼Œåç»­æ›´æ–°çš„åªä¼šæ›´æ”¹å€¼ã€‚</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> map1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

map1<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map1<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map1<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>map1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Map(2) {'b' =&gt; 3, 'a' =&gt; 2}</span>
</code></pre></div><p><strong>28ã€ä½œç”¨åŸŸ</strong>: node ä¸­æœ‰æ¨¡å—ä½œç”¨åŸŸï¼Œconst å’Œ let åœ¨å…¨å±€ä¸­å£°æ˜ä¼šå½¢æˆ script ä½œç”¨åŸŸï¼Œå¹¶ä¸æ˜¯å…¨å±€(global)ä½œç”¨åŸŸ<br> <strong>29ã€ä»£ç å—{}</strong>: åŠ æ³•è¿ç®—ï¼Œ{}æ”¾åœ¨å‰æ—¶ï¼Œè¢«è®¤ä¸ºæ˜¯ä»£ç å—ï¼Œå¿½ç•¥æ‰</p> <ol><li>{} + [] = 0</li> <li>[] + {} = '[object Object]'</li> <li>{} + '' = 0 , ç›¸å½“äº+''</li> <li>{} + {} = '[object Object][object object]', è¿™ä¸ªæ˜¯ç‰¹ä¾‹</li> <li>[] + [] = ''</li></ol> <p><strong>30ã€Object.freeze()å†»ç»“</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// å¯ä»¥ç”± const å£°æ˜çš„ç‰¹å¾è€Œè”æƒ³åˆ°ï¼Œå¤æ‚ç±»å‹å¯ä»¥ä¿®æ”¹å†…å®¹ Object.freeze()  æµ…å†»ç»“ å¯¹è±¡å’Œæ•°ç»„</span>
<span class="token comment">// å†»ç»“äº†ä¸€ä¸ªå¯¹è±¡åˆ™ä¸èƒ½å‘è¿™ä¸ªå¯¹è±¡æ·»åŠ æ–°çš„å±æ€§ï¼Œä¸èƒ½åˆ é™¤å·²æœ‰å±æ€§ï¼Œä¸èƒ½ä¿®æ”¹è¯¥å¯¹è±¡å·²æœ‰å±æ€§çš„å¯æšä¸¾æ€§ã€å¯é…ç½®æ€§ã€å¯å†™æ€§ï¼ˆæ•°æ®å±æ€§ï¼‰ï¼Œä»¥åŠä¸èƒ½ä¿®æ”¹å·²æœ‰å±æ€§çš„å€¼ã€‚</span>
<span class="token comment">// å·²æœ‰å±æ€§çš„è®¿é—®å™¨å±æ€§ä¹Ÿä¸èƒ½ä¿®æ”¹  getter setter Object.defineProperty</span>
<span class="token comment">// éä¸¥æ ¼æ¨¡å¼ ä¸æŠ¥é”™ ä½†æ˜¯æ·»åŠ ä¿®æ”¹åˆ é™¤å±æ€§æ— æ•ˆ</span>
<span class="token comment">// ä¸¥æ ¼æ¨¡å¼æŠ›å‡º ç±»å‹é”™è¯¯</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">prop</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  foo<span class="token operator">:</span> <span class="token string">&quot;bar&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

Object<span class="token punctuation">.</span><span class="token function">freeze</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">fail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 'use strict'</span>
  obj<span class="token punctuation">.</span>foo <span class="token operator">=</span> <span class="token string">&quot;sparky&quot;</span><span class="token punctuation">;</span> <span class="token comment">// throws a TypeError</span>
  <span class="token keyword">delete</span> obj<span class="token punctuation">.</span>quaxxor<span class="token punctuation">;</span> <span class="token comment">// è¿”å›trueï¼Œå› ä¸ºquaxxorå±æ€§ä»æ¥æœªè¢«æ·»åŠ </span>
  obj<span class="token punctuation">.</span>sparky <span class="token operator">=</span> <span class="token string">&quot;arf&quot;</span><span class="token punctuation">;</span> <span class="token comment">// throws a TypeError</span>
<span class="token punctuation">}</span>
<span class="token function">fail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//ä¸¥æ ¼æ¨¡å¼æŠ¥throw typeç±»å‹é”™è¯¯</span>

<span class="token comment">// æ³¨æ„ freezeæ–¹æ³•å¯¹å€¼ä¸ºå¯¹è±¡çš„æ•°æ®å¹¶ä¸èƒ½å†»ç»“</span>
<span class="token comment">// æ·±å†»ç»“å®ç°ï¼š</span>
<span class="token keyword">const</span> <span class="token function-variable function">deepFreeze</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> arr <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyNames</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//è‡ªèº«æ‰€æœ‰å±æ€§åŒ…æ‹¬å¯æšä¸¾å’Œä¸å¯æšä¸¾ æˆ–è€…ç”¨Reflect.ownKeys(obj)åŒ…æ‹¬symbol</span>
  <span class="token comment">// éå†æ¯ä¸€é¡¹ï¼Œå¦‚æœvalueæ˜¯å¤æ‚ç±»å‹åˆ™ç»§ç»­å†»ç»“</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> k <span class="token keyword">of</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> obj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span> <span class="token operator">&amp;&amp;</span> obj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token function">deepFreeze</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">freeze</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyNames</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//  [&quot;0&quot;, &quot;1&quot;, &quot;2&quot;, &quot;length&quot;] è‡ªèº«å¯æšä¸¾å’Œä¸å¯æšä¸¾çš„å±æ€§</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">1/14/2023, 12:00:20 AM</span></div></footer> <!----> </main></div><div class="global-ui"><div id="goTop" class="hide-cat" data-v-bf92849a></div></div></div>
    <script src="/blog/assets/js/app.99c8d667.js" defer></script><script src="/blog/assets/js/2.503560b4.js" defer></script><script src="/blog/assets/js/10.ff493e67.js" defer></script>
  </body>
</html>
